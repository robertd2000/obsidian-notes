# ÐŸÐ¾Ð»Ð½Ñ‹Ð¹ Ñ„Ð»Ð¾Ñƒ ÑÐ¸ÑÑ‚ÐµÐ¼Ñ‹ Ñ Ñ…Ñ€Ð°Ð½ÐµÐ½Ð¸ÐµÐ¼ Ð´Ð°Ð½Ð½Ñ‹Ñ…: Ð¾Ñ‚ Ð´Ð°Ñ‚Ñ‡Ð¸ÐºÐ° Ð´Ð¾ Ð¸ÑÑ‚Ð¾Ñ€Ð¸Ð¸

## ðŸŽ¯ ÐžÐ±Ñ‰Ð°Ñ ÑÑ…ÐµÐ¼Ð° ÑÐ¸ÑÑ‚ÐµÐ¼Ñ‹

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚          ÐŸÐžÐ›ÐÐ«Ð™ Ð¤Ð›ÐžÐ£ Ð”ÐÐÐÐ«Ð¥ Ð¡ Ð¥Ð ÐÐÐ•ÐÐ˜Ð•Ðœ                â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                         â”‚
â”‚  [GPS-Ð¢Ñ€ÐµÐºÐµÑ€]                                           â”‚
â”‚        â†“                                                â”‚
â”‚  [Ingestion Service] - Ð¿Ñ€Ð¸Ð½Ð¸Ð¼Ð°ÐµÑ‚ ÑÑ‹Ñ€Ñ‹Ðµ Ð´Ð°Ð½Ð½Ñ‹Ðµ           â”‚
â”‚        â†“                                                â”‚
â”‚  [Kafka] - Ð±ÑƒÑ„ÐµÑ€ Ð´Ð»Ñ Ð¿ÐµÑ€ÐµÐ´Ð°Ñ‡Ð¸                           â”‚
â”‚        â†“                                                â”‚
â”‚  [Processing Service] - Ð¾Ð±Ñ€Ð°Ð±Ð°Ñ‚Ñ‹Ð²Ð°ÐµÑ‚ Ð¸ Ð¾Ð±Ð¾Ð³Ð°Ñ‰Ð°ÐµÑ‚        â”‚
â”‚        â†“ (Ð¿Ð°Ñ€Ð°Ð»Ð»ÐµÐ»ÑŒÐ½Ð¾ Ð² Ð½ÐµÑÐºÐ¾Ð»ÑŒÐºÐ¾ Ñ…Ñ€Ð°Ð½Ð¸Ð»Ð¸Ñ‰)             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”‚
â”‚  â”‚          Ð¡Ð˜Ð¡Ð¢Ð•ÐœÐ Ð¥Ð ÐÐÐ•ÐÐ˜Ð¯ Ð”ÐÐÐÐ«Ð¥             â”‚      â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤      â”‚
â”‚  â”‚  Redis (ÑÐµÐºÑƒÐ½Ð´Ñ‹-Ñ‡Ð°ÑÑ‹)     â”‚  PostgreSQL     â”‚      â”‚
â”‚  â”‚  - Ð¢ÐµÐºÑƒÑ‰ÐµÐµ ÑÐ¾ÑÑ‚Ð¾ÑÐ½Ð¸Ðµ      â”‚  (Ð´Ð½Ð¸-Ð¼ÐµÑÑÑ†Ñ‹)   â”‚      â”‚
â”‚  â”‚  - ÐšÑÑˆ Ð´Ð°Ð½Ð½Ñ‹Ñ…            â”‚  - Ð˜ÑÑ‚Ð¾Ñ€Ð¸Ñ      â”‚      â”‚
â”‚  â”‚                          â”‚  - Ð¡Ð¾Ð±Ñ‹Ñ‚Ð¸Ñ      â”‚      â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â”‚
â”‚               â”‚                       â”‚                â”‚
â”‚               â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                â”‚
â”‚                           â†“                            â”‚
â”‚                  [ClickHouse] - Ð³Ð¾Ð´Ñ‹ Ð¸ÑÑ‚Ð¾Ñ€Ð¸Ð¸           â”‚
â”‚                                                         â”‚
â”‚        â†“                                                â”‚
â”‚  [Real-time Service] - Ð¾Ñ‚Ð´Ð°ÐµÑ‚ Ð´Ð°Ð½Ð½Ñ‹Ðµ ÐºÐ»Ð¸ÐµÐ½Ñ‚Ð°Ð¼          â”‚
â”‚        â†“                                                â”‚
â”‚  [ÐšÐ»Ð¸ÐµÐ½Ñ‚Ñ‹] - Ð²Ð¸Ð´ÑÑ‚ Ð¸Ð½Ñ„Ð¾Ñ€Ð¼Ð°Ñ†Ð¸ÑŽ Ð½Ð° ÐºÐ°Ñ€Ñ‚Ðµ                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ðŸ”„ Ð”ÐµÑ‚Ð°Ð»ÑŒÐ½Ñ‹Ð¹ Ð¿Ñ€Ð¾Ñ†ÐµÑÑ Ñ Ñ…Ñ€Ð°Ð½ÐµÐ½Ð¸ÐµÐ¼ Ð´Ð°Ð½Ð½Ñ‹Ñ…

### Ð­Ñ‚Ð°Ð¿ 1: ÐŸÑ€Ð¸ÐµÐ¼ Ð´Ð°Ð½Ð½Ñ‹Ñ… Ð¾Ñ‚ Ð´Ð°Ñ‚Ñ‡Ð¸ÐºÐ¾Ð² (Ingestion Service)

**Ð§Ñ‚Ð¾ Ð¿Ñ€Ð¾Ð¸ÑÑ…Ð¾Ð´Ð¸Ñ‚:** ÐœÐ°ÑˆÐ¸Ð½Ð° Ñ GPS-Ñ‚Ñ€ÐµÐºÐµÑ€Ð¾Ð¼ Ð¾Ñ‚Ð¿Ñ€Ð°Ð²Ð»ÑÐµÑ‚ Ð´Ð°Ð½Ð½Ñ‹Ðµ. ÐÐ°Ð¿Ñ€Ð¸Ð¼ÐµÑ€, Ð³Ñ€ÑƒÐ·Ð¾Ð²Ð¸Ðº Ñ Ð½Ð¾Ð¼ÐµÑ€Ð¾Ð¼ Ð123Ð‘Ð’ Ð² 10:30 ÑƒÑ‚Ñ€Ð° Ð¿Ñ€Ð¾ÐµÐ·Ð¶Ð°ÐµÑ‚ Ð¿Ð¾ Ð¢Ð²ÐµÑ€ÑÐºÐ¾Ð¹ ÑƒÐ»Ð¸Ñ†Ðµ.

```
ÐœÐ°ÑˆÐ¸Ð½Ð° â†’ Ð¢Ñ€ÐµÐºÐµÑ€ â†’ Ð¡Ð¾Ñ‚Ð¾Ð²Ñ‹Ð¹ Ð¾Ð¿ÐµÑ€Ð°Ñ‚Ð¾Ñ€ â†’ Ð˜Ð½Ñ‚ÐµÑ€Ð½ÐµÑ‚ â†’ Ingestion Service
```

**Ð”Ð°Ð½Ð½Ñ‹Ðµ Ð² ÑÑ‹Ñ€Ð¾Ð¼ Ð²Ð¸Ð´Ðµ (Ð½Ð°Ð¿Ñ€Ð¸Ð¼ÐµÑ€, Ð¿Ñ€Ð¾Ñ‚Ð¾ÐºÐ¾Ð» Teltonika):**
```
IMEI: 868123456789012
Ð’Ñ€ÐµÐ¼Ñ: 10:30:00
ÐšÐ¾Ð¾Ñ€Ð´Ð¸Ð½Ð°Ñ‚Ñ‹: 55.7558, 37.6176
Ð¡ÐºÐ¾Ñ€Ð¾ÑÑ‚ÑŒ: 65 ÐºÐ¼/Ñ‡
Ð¢Ð¾Ð¿Ð»Ð¸Ð²Ð¾: 45 Ð»Ð¸Ñ‚Ñ€Ð¾Ð²
Ð¢ÐµÐ¼Ð¿ÐµÑ€Ð°Ñ‚ÑƒÑ€Ð° Ð´Ð²Ð¸Ð³Ð°Ñ‚ÐµÐ»Ñ: 85Â°C
```

**Ingestion Service Ð´ÐµÐ»Ð°ÐµÑ‚:**
1. **ÐŸÑ€Ð¸Ð½Ð¸Ð¼Ð°ÐµÑ‚** Ð´Ð°Ð½Ð½Ñ‹Ðµ Ð¿Ð¾ TCP/UDP/HTTP
2. **Ð Ð°ÑÑˆÐ¸Ñ„Ñ€Ð¾Ð²Ñ‹Ð²Ð°ÐµÑ‚** Ð±Ð¸Ð½Ð°Ñ€Ð½Ñ‹Ð¹ Ñ„Ð¾Ñ€Ð¼Ð°Ñ‚
3. **ÐŸÑ€Ð¾Ð²ÐµÑ€ÑÐµÑ‚** ÐºÐ¾Ñ€Ñ€ÐµÐºÑ‚Ð½Ð¾ÑÑ‚ÑŒ (ÐºÐ¾Ð½Ñ‚Ñ€Ð¾Ð»ÑŒÐ½Ñ‹Ðµ ÑÑƒÐ¼Ð¼Ñ‹, Ð´Ð¸Ð°Ð¿Ð°Ð·Ð¾Ð½Ñ‹)
4. **ÐŸÑ€ÐµÐ¾Ð±Ñ€Ð°Ð·ÑƒÐµÑ‚** Ð² ÐµÐ´Ð¸Ð½Ñ‹Ð¹ Ð²Ð½ÑƒÑ‚Ñ€ÐµÐ½Ð½Ð¸Ð¹ Ñ„Ð¾Ñ€Ð¼Ð°Ñ‚ JSON
5. **ÐžÑ‚Ð¿Ñ€Ð°Ð²Ð»ÑÐµÑ‚** Ð² Kafka Ð´Ð»Ñ Ð´Ð°Ð»ÑŒÐ½ÐµÐ¹ÑˆÐµÐ¹ Ð¾Ð±Ñ€Ð°Ð±Ð¾Ñ‚ÐºÐ¸

**Ð“Ð´Ðµ Ñ…Ñ€Ð°Ð½ÑÑ‚ÑÑ Ð´Ð°Ð½Ð½Ñ‹Ðµ Ð½Ð° ÑÑ‚Ð¾Ð¼ ÑÑ‚Ð°Ð¿Ðµ:**
- **Kafka:** ÐÐ° 24 Ñ‡Ð°ÑÐ° (Ð±ÑƒÑ„ÐµÑ€ Ð½Ð° ÑÐ»ÑƒÑ‡Ð°Ð¹ ÑÐ±Ð¾ÐµÐ²)
- **PostgreSQL:** Ð¡Ñ‹Ñ€Ñ‹Ðµ Ð¿Ð°ÐºÐµÑ‚Ñ‹ Ð½Ð° 7 Ð´Ð½ÐµÐ¹ (Ð´Ð»Ñ Ð¾Ñ‚Ð»Ð°Ð´ÐºÐ¸)
- **Redis:** Ð¡Ñ‚Ð°Ñ‚ÑƒÑ Ð¿Ð¾Ð´ÐºÐ»ÑŽÑ‡ÐµÐ½Ð¸Ñ ÑƒÑÑ‚Ñ€Ð¾Ð¹ÑÑ‚Ð²Ð° (Ð¾Ð½Ð»Ð°Ð¹Ð½/Ð¾Ñ„Ñ„Ð»Ð°Ð¹Ð½)

### Ð­Ñ‚Ð°Ð¿ 2: ÐžÐ±Ñ€Ð°Ð±Ð¾Ñ‚ÐºÐ° Ð´Ð°Ð½Ð½Ñ‹Ñ… (Processing Service)

**Ð§Ñ‚Ð¾ Ð¿Ñ€Ð¾Ð¸ÑÑ…Ð¾Ð´Ð¸Ñ‚:** Ð¡Ð¸ÑÑ‚ÐµÐ¼Ð° Ð¿Ñ€ÐµÐ²Ñ€Ð°Ñ‰Ð°ÐµÑ‚ "ÑÑ‹Ñ€Ñ‹Ðµ ÐºÐ¾Ð¾Ñ€Ð´Ð¸Ð½Ð°Ñ‚Ñ‹" Ð² "Ð¾ÑÐ¼Ñ‹ÑÐ»ÐµÐ½Ð½ÑƒÑŽ Ð¸Ð½Ñ„Ð¾Ñ€Ð¼Ð°Ñ†Ð¸ÑŽ".

```
Processing Service Ð¿Ð¾Ð»ÑƒÑ‡Ð°ÐµÑ‚ Ð¸Ð· Kafka:
{
  "imei": "868123456789012",
  "time": "10:30:00",
  "lat": 55.7558,
  "lon": 37.6176,
  "speed": 65,
  "fuel": 45
}
```

**Processing Service Ð²Ñ‹Ð¿Ð¾Ð»Ð½ÑÐµÑ‚ 5 ÑˆÐ°Ð³Ð¾Ð²:**

**Ð¨Ð°Ð³ 1: ÐŸÑ€Ð¸Ð²ÑÐ·ÐºÐ° Ðº Ð¼Ð°ÑˆÐ¸Ð½Ðµ**
- ÐŸÐ¾ IMEÐ˜ ÑƒÑÑ‚Ñ€Ð¾Ð¹ÑÑ‚Ð²Ð° Ð½Ð°Ñ…Ð¾Ð´Ð¸Ñ‚ Ð² Ð±Ð°Ð·Ðµ Ð´Ð°Ð½Ð½Ñ‹Ñ…, Ñ‡Ñ‚Ð¾ ÑÑ‚Ð¾ Ð³Ñ€ÑƒÐ·Ð¾Ð²Ð¸Ðº Ð123Ð‘Ð’
- ÐÐ°Ñ…Ð¾Ð´Ð¸Ñ‚ Ð¸Ð½Ñ„Ð¾Ñ€Ð¼Ð°Ñ†Ð¸ÑŽ: Volvo FH16, 2020 Ð³Ð¾Ð´Ð°, ÑÐ¸Ð½Ð¸Ð¹ Ñ†Ð²ÐµÑ‚
- ÐžÐ¿Ñ€ÐµÐ´ÐµÐ»ÑÐµÑ‚, Ñ‡Ñ‚Ð¾ Ð·Ð° Ñ€ÑƒÐ»ÐµÐ¼ Ð˜Ð²Ð°Ð½Ð¾Ð² Ð˜Ð²Ð°Ð½ Ð˜Ð²Ð°Ð½Ð¾Ð²Ð¸Ñ‡
- ÐÐ°Ñ…Ð¾Ð´Ð¸Ñ‚ Ñ‚ÐµÐºÑƒÑ‰ÐµÐµ Ð·Ð°Ð´Ð°Ð½Ð¸Ðµ: Ð²ÐµÐ·ÐµÑ‚ Ð¿Ñ€Ð¾Ð´ÑƒÐºÑ‚Ñ‹ Ð² Ð¼Ð°Ð³Ð°Ð·Ð¸Ð½ "Ð’ÐµÑÐ½Ð°"

**Ð¨Ð°Ð³ 2: Ð“ÐµÐ¾Ð³Ñ€Ð°Ñ„Ð¸Ñ‡ÐµÑÐºÐ¾Ðµ Ð¾Ð±Ð¾Ð³Ð°Ñ‰ÐµÐ½Ð¸Ðµ**
- ÐšÐ¾Ð¾Ñ€Ð´Ð¸Ð½Ð°Ñ‚Ñ‹ 55.7558, 37.6176 â†’ Ð°Ð´Ñ€ÐµÑ "ÐœÐ¾ÑÐºÐ²Ð°, Ð¢Ð²ÐµÑ€ÑÐºÐ°Ñ ÑƒÐ»Ð¸Ñ†Ð°, 1"
- ÐžÐ¿Ñ€ÐµÐ´ÐµÐ»ÑÐµÑ‚, Ñ‡Ñ‚Ð¾ ÑÑ‚Ð¾ Ñ†ÐµÐ½Ñ‚Ñ€Ð°Ð»ÑŒÐ½Ð°Ñ ÑƒÐ»Ð¸Ñ†Ð°, Ð¾Ð³Ñ€Ð°Ð½Ð¸Ñ‡ÐµÐ½Ð¸Ðµ ÑÐºÐ¾Ñ€Ð¾ÑÑ‚Ð¸ 60 ÐºÐ¼/Ñ‡
- ÐŸÑ€Ð¾Ð²ÐµÑ€ÑÐµÑ‚ Ð¿Ð¾Ð³Ð¾Ð´Ñƒ: +5Â°C, Ð±ÐµÐ· Ð¾ÑÐ°Ð´ÐºÐ¾Ð²
- ÐŸÑ€Ð¾Ð²ÐµÑ€ÑÐµÑ‚ Ð¿Ñ€Ð¾Ð±ÐºÐ¸: ÑƒÐ¼ÐµÑ€ÐµÐ½Ð½Ñ‹Ðµ, Ð·Ð°Ð´ÐµÑ€Ð¶ÐºÐ° 5 Ð¼Ð¸Ð½ÑƒÑ‚

**Ð¨Ð°Ð³ 3: Ð’Ñ‹Ñ‡Ð¸ÑÐ»ÐµÐ½Ð¸Ðµ Ð¼ÐµÑ‚Ñ€Ð¸Ðº**
- Ð¡Ñ€Ð°Ð²Ð½Ð¸Ð²Ð°ÐµÑ‚ Ñ Ð¿Ñ€ÐµÐ´Ñ‹Ð´ÑƒÑ‰ÐµÐ¹ Ñ‚Ð¾Ñ‡ÐºÐ¾Ð¹ (10:25:00, 55.7500, 37.6000)
- Ð Ð°ÑÑÑ‡Ð¸Ñ‚Ñ‹Ð²Ð°ÐµÑ‚: Ð¿Ñ€Ð¾ÐµÑ…Ð°Ð» 1.2 ÐºÐ¼ Ð·Ð° 5 Ð¼Ð¸Ð½ÑƒÑ‚, ÑÑ€ÐµÐ´Ð½ÑÑ ÑÐºÐ¾Ñ€Ð¾ÑÑ‚ÑŒ 14.4 ÐºÐ¼/Ñ‡
- ÐžÐ¿Ñ€ÐµÐ´ÐµÐ»ÑÐµÑ‚: Ð¼Ð°ÑˆÐ¸Ð½Ð° Ð´Ð²Ð¸Ð¶ÐµÑ‚ÑÑ (ÑÐºÐ¾Ñ€Ð¾ÑÑ‚ÑŒ > 5 ÐºÐ¼/Ñ‡)
- ÐŸÑ€Ð¾Ð²ÐµÑ€ÑÐµÑ‚ Ñ€Ð°ÑÑ…Ð¾Ð´ Ñ‚Ð¾Ð¿Ð»Ð¸Ð²Ð°: Ð² Ð½Ð¾Ñ€Ð¼Ðµ

**Ð¨Ð°Ð³ 4: ÐžÐ±Ð½Ð°Ñ€ÑƒÐ¶ÐµÐ½Ð¸Ðµ ÑÐ¾Ð±Ñ‹Ñ‚Ð¸Ð¹**
- ÐŸÑ€Ð¾Ð²ÐµÑ€ÑÐµÑ‚: ÑÐºÐ¾Ñ€Ð¾ÑÑ‚ÑŒ 65 > Ð¾Ð³Ñ€Ð°Ð½Ð¸Ñ‡ÐµÐ½Ð¸Ðµ 60 â†’ Ð¿Ñ€ÐµÐ²Ñ‹ÑˆÐµÐ½Ð¸Ðµ ÑÐºÐ¾Ñ€Ð¾ÑÑ‚Ð¸!
- ÐŸÑ€Ð¾Ð²ÐµÑ€ÑÐµÑ‚ Ð³ÐµÐ¾Ð·Ð¾Ð½Ñ‹: Ð²ÑŠÐµÑ…Ð°Ð» Ð² Ñ†ÐµÐ½Ñ‚Ñ€ Ð³Ð¾Ñ€Ð¾Ð´Ð° (Ð·Ð¾Ð½Ð° Ð¿Ð»Ð°Ñ‚Ð½Ð¾Ð¹ Ð¿Ð°Ñ€ÐºÐ¾Ð²ÐºÐ¸)
- ÐŸÑ€Ð¾Ð²ÐµÑ€ÑÐµÑ‚ Ð³Ñ€Ð°Ñ„Ð¸Ðº: Ð¿Ð¾ Ð¿Ð»Ð°Ð½Ñƒ Ð´Ð¾Ð»Ð¶ÐµÐ½ Ð±Ñ‹Ñ‚ÑŒ ÑƒÐ¶Ðµ Ñƒ ÐºÐ»Ð¸ÐµÐ½Ñ‚Ð° (Ð¾Ð¿Ð¾Ð·Ð´Ð°Ð½Ð¸Ðµ 15 Ð¼Ð¸Ð½ÑƒÑ‚)

**Ð¨Ð°Ð³ 5: Ð˜Ð½Ñ‚ÐµÐ³Ñ€Ð°Ñ†Ð¸Ñ Ñ Ð±Ð¸Ð·Ð½ÐµÑ-ÑÐ¸ÑÑ‚ÐµÐ¼Ð°Ð¼Ð¸**
- ÐŸÑ€Ð¾Ð²ÐµÑ€ÑÐµÑ‚ Ð² CRM: ÐºÐ»Ð¸ÐµÐ½Ñ‚ "Ð’ÐµÑÐ½Ð°" - VIP, Ñ‚Ñ€ÐµÐ±ÑƒÐµÑ‚ Ñ‚Ð¾Ñ‡Ð½Ð¾ÑÑ‚Ð¸
- ÐŸÑ€Ð¾Ð²ÐµÑ€ÑÐµÑ‚ Ð² ERP: ÑÑ‚Ð¾Ð¸Ð¼Ð¾ÑÑ‚ÑŒ Ð´Ð¾ÑÑ‚Ð°Ð²ÐºÐ¸ 25,000 Ñ€ÑƒÐ±Ð»ÐµÐ¹
- ÐŸÑ€Ð¾Ð²ÐµÑ€ÑÐµÑ‚ Ð² WMS: Ð³Ñ€ÑƒÐ· - ÑÐºÐ¾Ñ€Ð¾Ð¿Ð¾Ñ€Ñ‚ÑÑ‰Ð¸ÐµÑÑ Ð¿Ñ€Ð¾Ð´ÑƒÐºÑ‚Ñ‹

## ðŸ—„ï¸ Ð“Ð´Ðµ Ð¸ ÐºÐ°Ðº Ñ…Ñ€Ð°Ð½ÑÑ‚ÑÑ Ð¾Ð±Ñ€Ð°Ð±Ð¾Ñ‚Ð°Ð½Ð½Ñ‹Ðµ Ð´Ð°Ð½Ð½Ñ‹Ðµ

### Ð¡Ð¸Ñ‚ÑƒÐ°Ñ†Ð¸Ñ: Ð½ÑƒÐ¶Ð½Ð¾ Ð½Ð°Ð¹Ñ‚Ð¸ Ð¿Ð¾ÑÐ»ÐµÐ´Ð½Ð¸Ðµ ÐºÐ¾Ð¾Ñ€Ð´Ð¸Ð½Ð°Ñ‚Ñ‹ Ð³Ñ€ÑƒÐ·Ð¾Ð²Ð¸ÐºÐ° Ð123Ð‘Ð’

**Ð¨Ð°Ð³ 1: ÐŸÑ€Ð¾Ð²ÐµÑ€ÑÐµÐ¼ Redis (ÑÐ°Ð¼Ñ‹Ð¹ Ð±Ñ‹ÑÑ‚Ñ€Ñ‹Ð¹)**

```
ÐšÐ»ÑŽÑ‡ Ð² Redis: vehicle:current:A123Ð‘Ð’
Ð—Ð½Ð°Ñ‡ÐµÐ½Ð¸Ðµ: {
  "lat": 55.7558,
  "lon": 37.6176,
  "speed": 65,
  "time": "10:30:00",
  "status": "moving",
  "driver": "Ð˜Ð²Ð°Ð½Ð¾Ð² Ð˜.Ð˜.",
  "address": "ÐœÐ¾ÑÐºÐ²Ð°, Ð¢Ð²ÐµÑ€ÑÐºÐ°Ñ ÑƒÐ»."
}
```

**Ð•ÑÐ»Ð¸ Ð² Redis Ð½ÐµÑ‚ Ð´Ð°Ð½Ð½Ñ‹Ñ…** (Ð½Ð°Ð¿Ñ€Ð¸Ð¼ÐµÑ€, TTL Ð¸ÑÑ‚ÐµÐº Ð¸Ð»Ð¸ Ð¼Ð°ÑˆÐ¸Ð½Ð° Ð´Ð°Ð²Ð½Ð¾ Ð½Ðµ Ð¾Ð½Ð»Ð°Ð¹Ð½), Ð¿ÐµÑ€ÐµÑ…Ð¾Ð´Ð¸Ð¼ Ðº ÑˆÐ°Ð³Ñƒ 2.

**Ð¨Ð°Ð³ 2: Ð˜Ñ‰ÐµÐ¼ Ð² PostgreSQL (Ð¾Ð¿ÐµÑ€Ð°Ñ†Ð¸Ð¾Ð½Ð½Ð°Ñ Ð±Ð°Ð·Ð°)**

```sql
SELECT * FROM vehicle_positions 
WHERE vehicle_id = 'A123Ð‘Ð’' 
ORDER BY timestamp DESC 
LIMIT 1;
```

Ð ÐµÐ·ÑƒÐ»ÑŒÑ‚Ð°Ñ‚:
```
ÐšÐ¾Ð¾Ñ€Ð´Ð¸Ð½Ð°Ñ‚Ñ‹: 55.7558, 37.6176
Ð’Ñ€ÐµÐ¼Ñ: 10:30:00
Ð¡ÐºÐ¾Ñ€Ð¾ÑÑ‚ÑŒ: 65 ÐºÐ¼/Ñ‡
Ð¡Ñ‚Ð°Ñ‚ÑƒÑ: moving
```

**Ð¨Ð°Ð³ 3: Ð•ÑÐ»Ð¸ Ð½ÑƒÐ¶Ð½Ð¾ Ð½Ð°Ð¹Ñ‚Ð¸ ÑÑ‚Ð°Ñ€Ñ‹Ðµ Ð´Ð°Ð½Ð½Ñ‹Ðµ (Ð±Ð¾Ð»ÑŒÑˆÐµ 30 Ð´Ð½ÐµÐ¹)**
Ð˜Ð´ÐµÐ¼ Ð² ClickHouse:

```sql
SELECT * FROM gps_points 
WHERE vehicle_id = 'A123Ð‘Ð’' 
  AND date >= '2024-01-01' 
  AND date <= '2024-01-15'
ORDER BY timestamp DESC 
LIMIT 1;
```

### Ð¡Ð¸Ñ‚ÑƒÐ°Ñ†Ð¸Ñ: Ð½ÑƒÐ¶Ð½Ð¾ Ð¿Ð¾ÑÑ‚Ñ€Ð¾Ð¸Ñ‚ÑŒ Ñ‚Ñ€Ð°ÐµÐºÑ‚Ð¾Ñ€Ð¸ÑŽ Ð·Ð° Ð¿Ð¾ÑÐ»ÐµÐ´Ð½Ð¸Ðµ 3 Ð¼ÐµÑÑÑ†Ð°

**Ð”Ð»Ñ Ñ€Ð°Ð·Ð½Ñ‹Ñ… Ð¿ÐµÑ€Ð¸Ð¾Ð´Ð¾Ð² Ð¸ÑÐ¿Ð¾Ð»ÑŒÐ·ÑƒÐµÐ¼ Ñ€Ð°Ð·Ð½Ñ‹Ðµ Ñ…Ñ€Ð°Ð½Ð¸Ð»Ð¸Ñ‰Ð°:**

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚        Ð¢Ð ÐÐ•ÐšÐ¢ÐžÐ Ð˜Ð¯ Ð—Ð ÐŸÐžÐ¡Ð›Ð•Ð”ÐÐ˜Ð• 24 Ð§ÐÐ¡Ð                  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Ð˜ÑÑ‚Ð¾Ñ‡Ð½Ð¸Ðº: Redis + PostgreSQL                            â”‚
â”‚ ÐŸÑ€Ð¾Ñ†ÐµÑÑ:                                                â”‚
â”‚ 1. Ð‘ÐµÑ€ÐµÐ¼ Ñ‚ÐµÐºÑƒÑ‰ÑƒÑŽ Ñ‚Ñ€Ð°ÐµÐºÑ‚Ð¾Ñ€Ð¸ÑŽ Ð¸Ð· Redis (ÐµÑÐ»Ð¸ Ð¿Ð¾ÐµÐ·Ð´ÐºÐ°     â”‚
â”‚    ÐµÑ‰Ðµ Ð¿Ñ€Ð¾Ð´Ð¾Ð»Ð¶Ð°ÐµÑ‚ÑÑ)                                    â”‚
â”‚ 2. Ð”Ð¾Ð±Ð¸Ñ€Ð°ÐµÐ¼ Ð½ÐµÐ´Ð¾ÑÑ‚Ð°ÑŽÑ‰Ð¸Ðµ Ñ‚Ð¾Ñ‡ÐºÐ¸ Ð¸Ð· PostgreSQL            â”‚
â”‚ 3. ÐžÐ±ÑŠÐµÐ´Ð¸Ð½ÑÐµÐ¼ Ð² Ð¾Ð´Ð½Ñƒ Ð»Ð¸Ð½Ð¸ÑŽ                             â”‚
â”‚ Ð’Ñ€ÐµÐ¼Ñ Ð¾Ð±Ñ€Ð°Ð±Ð¾Ñ‚ÐºÐ¸: 100-500 Ð¼Ñ                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚        Ð¢Ð ÐÐ•ÐšÐ¢ÐžÐ Ð˜Ð¯ Ð—Ð ÐŸÐžÐ¡Ð›Ð•Ð”ÐÐ˜Ð• 30 Ð”ÐÐ•Ð™                  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Ð˜ÑÑ‚Ð¾Ñ‡Ð½Ð¸Ðº: PostgreSQL                                    â”‚
â”‚ ÐŸÑ€Ð¾Ñ†ÐµÑÑ:                                                â”‚
â”‚ 1. Ð˜Ñ‰ÐµÐ¼ Ð²ÑÐµ Ñ‚Ð¾Ñ‡ÐºÐ¸ Ð·Ð° Ð¿ÐµÑ€Ð¸Ð¾Ð´ Ð² PostgreSQL               â”‚
â”‚ 2. Ð•ÑÐ»Ð¸ Ñ‚Ð¾Ñ‡ÐµÐº Ð¼Ð½Ð¾Ð³Ð¾ (Ñ‚Ñ‹ÑÑÑ‡Ð¸), ÑƒÐ¿Ñ€Ð¾Ñ‰Ð°ÐµÐ¼ Ñ‚Ñ€Ð°ÐµÐºÑ‚Ð¾Ñ€Ð¸ÑŽ      â”‚
â”‚    (Ð°Ð»Ð³Ð¾Ñ€Ð¸Ñ‚Ð¼ Ð”ÑƒÐ³Ð»Ð°ÑÐ°-ÐŸÐµÐºÐµÑ€Ð°)                           â”‚
â”‚ 3. Ð’Ð¾Ð·Ð²Ñ€Ð°Ñ‰Ð°ÐµÐ¼ ÑƒÐ¿Ñ€Ð¾Ñ‰ÐµÐ½Ð½ÑƒÑŽ Ð²ÐµÑ€ÑÐ¸ÑŽ                        â”‚
â”‚ Ð’Ñ€ÐµÐ¼Ñ Ð¾Ð±Ñ€Ð°Ð±Ð¾Ñ‚ÐºÐ¸: 1-3 ÑÐµÐºÑƒÐ½Ð´Ñ‹                           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚        Ð¢Ð ÐÐ•ÐšÐ¢ÐžÐ Ð˜Ð¯ Ð—Ð ÐŸÐžÐ¡Ð›Ð•Ð”ÐÐ˜Ð• 6 ÐœÐ•Ð¡Ð¯Ð¦Ð•Ð’                â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Ð˜ÑÑ‚Ð¾Ñ‡Ð½Ð¸Ðº: ClickHouse                                    â”‚
â”‚ ÐŸÑ€Ð¾Ñ†ÐµÑÑ:                                                â”‚
â”‚ 1. Ð—Ð°Ð¿Ñ€Ð°ÑˆÐ¸Ð²Ð°ÐµÐ¼ Ñ‚Ð¾Ñ‡ÐºÐ¸ Ð¸Ð· ClickHouse                     â”‚
â”‚ 2. ClickHouse Ð±Ñ‹ÑÑ‚Ñ€Ð¾ Ð¾Ð±Ñ€Ð°Ð±Ð°Ñ‚Ñ‹Ð²Ð°ÐµÑ‚ Ð¼Ð¸Ð»Ð»Ð¸Ð¾Ð½Ñ‹ Ð·Ð°Ð¿Ð¸ÑÐµÐ¹     â”‚
â”‚ 3. Ð¡Ð¸Ð»ÑŒÐ½Ð¾ ÑƒÐ¿Ñ€Ð¾Ñ‰Ð°ÐµÐ¼ Ñ‚Ñ€Ð°ÐµÐºÑ‚Ð¾Ñ€Ð¸ÑŽ (1 Ñ‚Ð¾Ñ‡ÐºÐ° Ð½Ð° 5 Ð¼Ð¸Ð½ÑƒÑ‚)     â”‚
â”‚ 4. Ð’Ð¾Ð·Ð²Ñ€Ð°Ñ‰Ð°ÐµÐ¼ Ð¾Ð±Ð¾Ð±Ñ‰ÐµÐ½Ð½Ñ‹Ð¹ Ð¿ÑƒÑ‚ÑŒ                          â”‚
â”‚ Ð’Ñ€ÐµÐ¼Ñ Ð¾Ð±Ñ€Ð°Ð±Ð¾Ñ‚ÐºÐ¸: 3-10 ÑÐµÐºÑƒÐ½Ð´                           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚        Ð¢Ð ÐÐ•ÐšÐ¢ÐžÐ Ð˜Ð¯ Ð—Ð ÐŸÐžÐ¡Ð›Ð•Ð”ÐÐ˜Ð• 2 Ð“ÐžÐ”Ð                   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Ð˜ÑÑ‚Ð¾Ñ‡Ð½Ð¸Ðº: ClickHouse + ÐÑ€Ñ…Ð¸Ð² (S3)                       â”‚
â”‚ ÐŸÑ€Ð¾Ñ†ÐµÑÑ:                                                â”‚
â”‚ 1. Ð‘ÐµÑ€ÐµÐ¼ Ð°Ð³Ñ€ÐµÐ³Ð¸Ñ€Ð¾Ð²Ð°Ð½Ð½Ñ‹Ðµ Ð´Ð°Ð½Ð½Ñ‹Ðµ Ð¸Ð· ClickHouse           â”‚
â”‚    (1 Ñ‚Ð¾Ñ‡ÐºÐ° Ð² Ð´ÐµÐ½ÑŒ)                                     â”‚
â”‚ 2. Ð•ÑÐ»Ð¸ Ð½ÑƒÐ¶Ð½Ð° Ð´ÐµÑ‚Ð°Ð»Ð¸Ð·Ð°Ñ†Ð¸Ñ, Ð¿Ð¾Ð´Ð³Ñ€ÑƒÐ¶Ð°ÐµÐ¼ Ð¸Ð· Ð°Ñ€Ñ…Ð¸Ð²Ð° S3     â”‚
â”‚ 3. Ð’Ð¾ÑÑÑ‚Ð°Ð½Ð°Ð²Ð»Ð¸Ð²Ð°ÐµÐ¼ Ð¸ Ð²Ð¾Ð·Ð²Ñ€Ð°Ñ‰Ð°ÐµÐ¼                        â”‚
â”‚ Ð’Ñ€ÐµÐ¼Ñ Ð¾Ð±Ñ€Ð°Ð±Ð¾Ñ‚ÐºÐ¸: 10-60 ÑÐµÐºÑƒÐ½Ð´                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ðŸ“Š Ð”ÐµÑ‚Ð°Ð»Ð¸ Ñ…Ñ€Ð°Ð½ÐµÐ½Ð¸Ñ Ð² ÐºÐ°Ð¶Ð´Ð¾Ð¼ Ñ…Ñ€Ð°Ð½Ð¸Ð»Ð¸Ñ‰Ðµ

### 1. Redis: Ð Ð°Ð±Ð¾Ñ‡Ð°Ñ Ð¿Ð°Ð¼ÑÑ‚ÑŒ (Ñ…Ñ€Ð°Ð½Ð¸Ñ‚ÑÑ ÑÐµÐºÑƒÐ½Ð´Ñ‹-Ñ‡Ð°ÑÑ‹)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    Ð§Ð¢Ðž Ð¥Ð ÐÐÐ˜Ð¢Ð¡Ð¯ Ð’ REDIS                 â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                         â”‚
â”‚  Ð‘Ð›ÐžÐš 1: Ð¢ÐµÐºÑƒÑ‰ÐµÐµ ÑÐ¾ÑÑ‚Ð¾ÑÐ½Ð¸Ðµ Ð¼Ð°ÑˆÐ¸Ð½                       â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ ÐšÐ»ÑŽÑ‡: vehicle:current:A123Ð‘Ð’                   â”‚   â”‚
â”‚  â”‚ Ð—Ð½Ð°Ñ‡ÐµÐ½Ð¸Ðµ: JSON Ñ Ð¿Ð¾ÑÐ»ÐµÐ´Ð½Ð¸Ð¼Ð¸ Ð´Ð°Ð½Ð½Ñ‹Ð¼Ð¸             â”‚   â”‚
â”‚  â”‚ TTL: 2 Ñ‡Ð°ÑÐ° (ÐµÑÐ»Ð¸ Ð½ÐµÑ‚ Ð¾Ð±Ð½Ð¾Ð²Ð»ÐµÐ½Ð¸Ð¹ - ÑƒÐ´Ð°Ð»ÑÐµÑ‚ÑÑ)   â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                         â”‚
â”‚  Ð‘Ð›ÐžÐš 2: ÐÐºÑ‚Ð¸Ð²Ð½Ñ‹Ðµ Ñ‚Ñ€Ð°ÐµÐºÑ‚Ð¾Ñ€Ð¸Ð¸                           â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ ÐšÐ»ÑŽÑ‡: trajectory:current:A123Ð‘Ð’                â”‚   â”‚
â”‚  â”‚ Ð—Ð½Ð°Ñ‡ÐµÐ½Ð¸Ðµ: Ð¡Ð¿Ð¸ÑÐ¾Ðº Ñ‚Ð¾Ñ‡ÐµÐº Ñ‚ÐµÐºÑƒÑ‰ÐµÐ¹ Ð¿Ð¾ÐµÐ·Ð´ÐºÐ¸         â”‚   â”‚
â”‚  â”‚ TTL: 24 Ñ‡Ð°ÑÐ° (Ð¿Ð¾ÑÐ»Ðµ Ð¾ÐºÐ¾Ð½Ñ‡Ð°Ð½Ð¸Ñ Ð¿Ð¾ÐµÐ·Ð´ÐºÐ¸)         â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                         â”‚
â”‚  Ð‘Ð›ÐžÐš 3: Ð“ÐµÐ¾Ð¿Ñ€Ð¾ÑÑ‚Ñ€Ð°Ð½ÑÑ‚Ð²ÐµÐ½Ð½Ñ‹Ð¹ Ð¸Ð½Ð´ÐµÐºÑ                    â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ Ð¡Ñ‚Ñ€ÑƒÐºÑ‚ÑƒÑ€Ð°: GEO vehicles:geoindex               â”‚   â”‚
â”‚  â”‚ Ð”Ð°Ð½Ð½Ñ‹Ðµ: ÐšÐ¾Ð¾Ñ€Ð´Ð¸Ð½Ð°Ñ‚Ñ‹ Ð²ÑÐµÑ… Ð¾Ð½Ð»Ð°Ð¹Ð½-Ð¼Ð°ÑˆÐ¸Ð½           â”‚   â”‚
â”‚  â”‚ ÐÐ°Ð·Ð½Ð°Ñ‡ÐµÐ½Ð¸Ðµ: Ð‘Ñ‹ÑÑ‚Ñ€Ñ‹Ð¹ Ð¿Ð¾Ð¸ÑÐº Ð¼Ð°ÑˆÐ¸Ð½ Ð² Ñ€Ð°Ð´Ð¸ÑƒÑÐµ      â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                         â”‚
â”‚  Ð‘Ð›ÐžÐš 4: Ð¡ÐµÑÑÐ¸Ð¸ Ð¿Ð¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ñ‚ÐµÐ»ÐµÐ¹                          â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ ÐšÐ»ÑŽÑ‡: session:user_123                         â”‚   â”‚
â”‚  â”‚ Ð—Ð½Ð°Ñ‡ÐµÐ½Ð¸Ðµ: Ð”Ð°Ð½Ð½Ñ‹Ðµ ÑÐµÑÑÐ¸Ð¸, Ð¿Ð¾Ð´Ð¿Ð¸ÑÐºÐ¸              â”‚   â”‚
â”‚  â”‚ TTL: 1 Ñ‡Ð°Ñ Ð½ÐµÐ°ÐºÑ‚Ð¸Ð²Ð½Ð¾ÑÑ‚Ð¸                        â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                         â”‚
â”‚  Ð‘Ð›ÐžÐš 5: ÐšÑÑˆ Ñ‡Ð°ÑÑ‚Ð¾ Ð·Ð°Ð¿Ñ€Ð°ÑˆÐ¸Ð²Ð°ÐµÐ¼Ñ‹Ñ… Ð´Ð°Ð½Ð½Ñ‹Ñ…                â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ ÐšÐ»ÑŽÑ‡: cache:vehicle_info:A123Ð‘Ð’                â”‚   â”‚
â”‚  â”‚ Ð—Ð½Ð°Ñ‡ÐµÐ½Ð¸Ðµ: Ð˜Ð½Ñ„Ð¾Ñ€Ð¼Ð°Ñ†Ð¸Ñ Ð¾ Ð¼Ð°ÑˆÐ¸Ð½Ðµ Ð¸ Ð²Ð¾Ð´Ð¸Ñ‚ÐµÐ»Ðµ        â”‚   â”‚
â”‚  â”‚ TTL: 5 Ð¼Ð¸Ð½ÑƒÑ‚                                    â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 2. PostgreSQL: ÐžÐ¿ÐµÑ€Ð°Ñ†Ð¸Ð¾Ð½Ð½Ð°Ñ Ð±Ð°Ð·Ð° (Ñ…Ñ€Ð°Ð½Ð¸Ñ‚ÑÑ Ð´Ð½Ð¸-Ð¼ÐµÑÑÑ†Ñ‹)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                Ð¢ÐÐ‘Ð›Ð˜Ð¦Ð« Ð’ POSTGRESQL                     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                         â”‚
â”‚  Ð¢ÐÐ‘Ð›Ð˜Ð¦Ð 1: vehicle_positions (Ð¿Ð¾Ð·Ð¸Ñ†Ð¸Ð¸ Ð¼Ð°ÑˆÐ¸Ð½)          â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤   â”‚
â”‚  â”‚ â€¢ Ð¥Ñ€Ð°Ð½Ð¸Ñ‚: Ð’ÑÐµ Ñ‚Ð¾Ñ‡ÐºÐ¸ Ð·Ð° Ð¿Ð¾ÑÐ»ÐµÐ´Ð½Ð¸Ðµ 30 Ð´Ð½ÐµÐ¹        â”‚   â”‚
â”‚  â”‚ â€¢ Ð¡Ñ‚Ñ€ÑƒÐºÑ‚ÑƒÑ€Ð°: ÐžÐ´Ð½Ð° ÑÑ‚Ñ€Ð¾ÐºÐ° = Ð¾Ð´Ð½Ð° Ñ‚Ð¾Ñ‡ÐºÐ°           â”‚   â”‚
â”‚  â”‚ â€¢ Ð˜Ð½Ð´ÐµÐºÑÑ‹: ÐŸÐ¾ vehicle_id, timestamp             â”‚   â”‚
â”‚  â”‚ â€¢ ÐŸÐ°Ñ€Ñ‚Ð¸Ñ†Ð¸Ð¾Ð½Ð¸Ñ€Ð¾Ð²Ð°Ð½Ð¸Ðµ: ÐŸÐ¾ Ð´Ð½ÑÐ¼                    â”‚   â”‚
â”‚  â”‚ â€¢ Ð£Ð´Ð°Ð»ÐµÐ½Ð¸Ðµ ÑÑ‚Ð°Ñ€Ñ‹Ñ… Ð´Ð°Ð½Ð½Ñ‹Ñ…: ÐÐ²Ñ‚Ð¾Ð¼Ð°Ñ‚Ð¸Ñ‡ÐµÑÐºÐ¾Ðµ Ñ‡ÐµÑ€ÐµÐ·  â”‚   â”‚
â”‚  â”‚   30 Ð´Ð½ÐµÐ¹ (DROP ÑÑ‚Ð°Ñ€Ñ‹Ñ… Ð¿Ð°Ñ€Ñ‚Ð¸Ñ†Ð¸Ð¹)                â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                         â”‚
â”‚  Ð¢ÐÐ‘Ð›Ð˜Ð¦Ð 2: vehicles (Ð¸Ð½Ñ„Ð¾Ñ€Ð¼Ð°Ñ†Ð¸Ñ Ð¾ Ð¼Ð°ÑˆÐ¸Ð½Ð°Ñ…)            â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤   â”‚
â”‚  â”‚ â€¢ Ð¥Ñ€Ð°Ð½Ð¸Ñ‚: ÐŸÐ¾ÑÑ‚Ð¾ÑÐ½Ð½ÑƒÑŽ Ð¸Ð½Ñ„Ð¾Ñ€Ð¼Ð°Ñ†Ð¸ÑŽ Ð¾ Ð¢Ð¡            â”‚   â”‚
â”‚  â”‚ â€¢ Ð¡Ñ‚Ñ€ÑƒÐºÑ‚ÑƒÑ€Ð°: ÐœÐ°Ñ€ÐºÐ°, Ð¼Ð¾Ð´ÐµÐ»ÑŒ, Ð³Ð¾Ð´, Ñ†Ð²ÐµÑ‚, VIN      â”‚   â”‚
â”‚  â”‚ â€¢ Ð¡Ð²ÑÐ·Ð¸: Ð¡ Ð²Ð¾Ð´Ð¸Ñ‚ÐµÐ»ÑÐ¼Ð¸, Ð·Ð°Ð´Ð°Ð½Ð¸ÑÐ¼Ð¸                â”‚   â”‚
â”‚  â”‚ â€¢ ÐžÐ±Ð½Ð¾Ð²Ð»ÐµÐ½Ð¸Ðµ: ÐŸÑ€Ð¸ Ð¸Ð·Ð¼ÐµÐ½ÐµÐ½Ð¸Ð¸ Ð´Ð°Ð½Ð½Ñ‹Ñ…              â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                         â”‚
â”‚  Ð¢ÐÐ‘Ð›Ð˜Ð¦Ð 3: events (ÑÐ¾Ð±Ñ‹Ñ‚Ð¸Ñ)                           â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤   â”‚
â”‚  â”‚ â€¢ Ð¥Ñ€Ð°Ð½Ð¸Ñ‚: Ð’ÑÐµ ÑÐ¾Ð±Ñ‹Ñ‚Ð¸Ñ Ð·Ð° 90 Ð´Ð½ÐµÐ¹                â”‚   â”‚
â”‚  â”‚ â€¢ Ð¢Ð¸Ð¿Ñ‹: ÐŸÑ€ÐµÐ²Ñ‹ÑˆÐµÐ½Ð¸Ðµ ÑÐºÐ¾Ñ€Ð¾ÑÑ‚Ð¸, Ð¾ÑÑ‚Ð°Ð½Ð¾Ð²ÐºÐ¸,         â”‚   â”‚
â”‚  â”‚   Ð³ÐµÐ¾Ð·Ð¾Ð½Ñ‹, Ñ‚ÐµÑ…Ð½Ð¸Ñ‡ÐµÑÐºÐ¸Ðµ ÑÐ¾Ð±Ñ‹Ñ‚Ð¸Ñ                  â”‚   â”‚
â”‚  â”‚ â€¢ Ð¡Ð²ÑÐ·Ð¸: Ð¡ Ð¼Ð°ÑˆÐ¸Ð½Ð°Ð¼Ð¸, Ð²Ð¾Ð´Ð¸Ñ‚ÐµÐ»ÑÐ¼Ð¸, Ñ‚Ð¾Ñ‡ÐºÐ°Ð¼Ð¸       â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                         â”‚
â”‚  Ð¢ÐÐ‘Ð›Ð˜Ð¦Ð 4: trajectories (Ñ‚Ñ€Ð°ÐµÐºÑ‚Ð¾Ñ€Ð¸Ð¸)                  â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤   â”‚
â”‚  â”‚ â€¢ Ð¥Ñ€Ð°Ð½Ð¸Ñ‚: Ð£Ð¿Ñ€Ð¾Ñ‰ÐµÐ½Ð½Ñ‹Ðµ Ñ‚Ñ€Ð°ÐµÐºÑ‚Ð¾Ñ€Ð¸Ð¸ Ð·Ð° 90 Ð´Ð½ÐµÐ¹      â”‚   â”‚
â”‚  â”‚ â€¢ Ð¡Ñ‚Ñ€ÑƒÐºÑ‚ÑƒÑ€Ð°: Ð“ÐµÐ¾Ð¼ÐµÑ‚Ñ€Ð¸Ñ Ð»Ð¸Ð½Ð¸Ð¸ + Ð¼ÐµÑ‚Ð°Ð´Ð°Ð½Ð½Ñ‹Ðµ       â”‚   â”‚
â”‚  â”‚ â€¢ Ð£Ð¿Ñ€Ð¾Ñ‰ÐµÐ½Ð¸Ðµ: ÐÐ»Ð³Ð¾Ñ€Ð¸Ñ‚Ð¼ Ð”ÑƒÐ³Ð»Ð°ÑÐ°-ÐŸÐµÐºÐµÑ€Ð°            â”‚   â”‚
â”‚  â”‚ â€¢ Ð˜ÑÐ¿Ð¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ð½Ð¸Ðµ: Ð”Ð»Ñ Ð±Ñ‹ÑÑ‚Ñ€Ð¾Ð³Ð¾ Ð¾Ñ‚Ð¾Ð±Ñ€Ð°Ð¶ÐµÐ½Ð¸Ñ       â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                         â”‚
â”‚  Ð¢ÐÐ‘Ð›Ð˜Ð¦Ð 5: drivers (Ð²Ð¾Ð´Ð¸Ñ‚ÐµÐ»Ð¸)                         â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤   â”‚
â”‚  â”‚ â€¢ Ð¥Ñ€Ð°Ð½Ð¸Ñ‚: Ð˜Ð½Ñ„Ð¾Ñ€Ð¼Ð°Ñ†Ð¸ÑŽ Ð¾ Ð²Ð¾Ð´Ð¸Ñ‚ÐµÐ»ÑÑ…                â”‚   â”‚
â”‚  â”‚ â€¢ Ð”Ð°Ð½Ð½Ñ‹Ðµ: Ð¤Ð˜Ðž, Ð¿Ñ€Ð°Ð²Ð°, Ñ‚ÐµÐ»ÐµÑ„Ð¾Ð½, ÑÑ‚Ð°Ð¶            â”‚   â”‚
â”‚  â”‚ â€¢ Ð¡Ñ‚Ð°Ñ‚ÑƒÑ: ÐÐºÑ‚Ð¸Ð²Ð½Ñ‹Ð¹/Ð½ÐµÐ°ÐºÑ‚Ð¸Ð²Ð½Ñ‹Ð¹                   â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 3. ClickHouse: ÐÐ½Ð°Ð»Ð¸Ñ‚Ð¸Ñ‡ÐµÑÐºÐ°Ñ Ð±Ð°Ð·Ð° (Ñ…Ñ€Ð°Ð½Ð¸Ñ‚ÑÑ Ð¼ÐµÑÑÑ†Ñ‹-Ð³Ð¾Ð´Ñ‹)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                 Ð¢ÐÐ‘Ð›Ð˜Ð¦Ð« Ð’ CLICKHOUSE                    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                         â”‚
â”‚  Ð¢ÐÐ‘Ð›Ð˜Ð¦Ð 1: gps_points (Ð²ÑÐµ Ñ‚Ð¾Ñ‡ÐºÐ¸)                     â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤   â”‚
â”‚  â”‚ â€¢ Ð¥Ñ€Ð°Ð½Ð¸Ñ‚: Ð’ÑÐµ GPS-Ñ‚Ð¾Ñ‡ÐºÐ¸ Ð·Ð° 2 Ð³Ð¾Ð´Ð°                â”‚   â”‚
â”‚  â”‚ â€¢ ÐžÐ±ÑŠÐµÐ¼: ÐœÐ¸Ð»Ð»Ð¸Ð°Ñ€Ð´Ñ‹ Ð·Ð°Ð¿Ð¸ÑÐµÐ¹                       â”‚   â”‚
â”‚  â”‚ â€¢ ÐšÐ¾Ð¼Ð¿Ñ€ÐµÑÑÐ¸Ñ: Ð’Ñ‹ÑÐ¾ÐºÐ°Ñ (Ð´Ð¾ 10:1)                  â”‚   â”‚
â”‚  â”‚ â€¢ ÐŸÐ°Ñ€Ñ‚Ð¸Ñ†Ð¸Ð¾Ð½Ð¸Ñ€Ð¾Ð²Ð°Ð½Ð¸Ðµ: ÐŸÐ¾ Ð¼ÐµÑÑÑ†Ð°Ð¼                  â”‚   â”‚
â”‚  â”‚ â€¢ TTL: ÐÐ²Ñ‚Ð¾Ð¼Ð°Ñ‚Ð¸Ñ‡ÐµÑÐºÐ¾Ðµ ÑƒÐ´Ð°Ð»ÐµÐ½Ð¸Ðµ Ñ‡ÐµÑ€ÐµÐ· 2 Ð³Ð¾Ð´Ð°      â”‚   â”‚
â”‚  â”‚ â€¢ Ð˜Ð½Ð´ÐµÐºÑÑ‹: ÐŸÐ¾ vehicle_id, date                   â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                         â”‚
â”‚  Ð¢ÐÐ‘Ð›Ð˜Ð¦Ð 2: daily_aggregates (Ð´Ð½ÐµÐ²Ð½Ñ‹Ðµ Ð°Ð³Ñ€ÐµÐ³Ð°Ñ‚Ñ‹)        â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤   â”‚
â”‚  â”‚ â€¢ Ð¥Ñ€Ð°Ð½Ð¸Ñ‚: ÐÐ³Ñ€ÐµÐ³Ð¸Ñ€Ð¾Ð²Ð°Ð½Ð½Ñ‹Ðµ Ð´Ð°Ð½Ð½Ñ‹Ðµ Ð¿Ð¾ Ð´Ð½ÑÐ¼         â”‚   â”‚
â”‚  â”‚ â€¢ Ð”Ð°Ð½Ð½Ñ‹Ðµ: ÐŸÑ€Ð¾Ð±ÐµÐ³, Ð²Ñ€ÐµÐ¼Ñ Ñ€Ð°Ð±Ð¾Ñ‚Ñ‹, Ñ€Ð°ÑÑ…Ð¾Ð´ Ñ‚Ð¾Ð¿Ð»Ð¸Ð²Ð°  â”‚   â”‚
â”‚  â”‚ â€¢ Ð Ð°Ð·Ð¼ÐµÑ€: ÐÐµÐ±Ð¾Ð»ÑŒÑˆÐ¾Ð¹ (Ð¾Ð´Ð½Ð° ÑÑ‚Ñ€Ð¾ÐºÐ° Ð½Ð° Ð¼Ð°ÑˆÐ¸Ð½Ñƒ Ð² Ð´ÐµÐ½ÑŒ)â”‚
â”‚  â”‚ â€¢ TTL: 5 Ð»ÐµÑ‚                                     â”‚   â”‚
â”‚  â”‚ â€¢ Ð˜ÑÐ¿Ð¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ð½Ð¸Ðµ: Ð‘Ñ‹ÑÑ‚Ñ€Ñ‹Ðµ Ð¾Ñ‚Ñ‡ÐµÑ‚Ñ‹                 â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                         â”‚
â”‚  Ð¢ÐÐ‘Ð›Ð˜Ð¦Ð 3: events_history (Ð¸ÑÑ‚Ð¾Ñ€Ð¸Ñ ÑÐ¾Ð±Ñ‹Ñ‚Ð¸Ð¹)           â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤   â”‚
â”‚  â”‚ â€¢ Ð¥Ñ€Ð°Ð½Ð¸Ñ‚: Ð’ÑÐµ ÑÐ¾Ð±Ñ‹Ñ‚Ð¸Ñ Ð·Ð° 2 Ð³Ð¾Ð´Ð°                 â”‚   â”‚
â”‚  â”‚ â€¢ ÐžÐ±ÑŠÐµÐ¼: ÐœÐ¸Ð»Ð»Ð¸Ð¾Ð½Ñ‹ Ð·Ð°Ð¿Ð¸ÑÐµÐ¹                       â”‚   â”‚
â”‚  â”‚ â€¢ Ð”ÐµÑ‚Ð°Ð»Ð¸Ð·Ð°Ñ†Ð¸Ñ: ÐŸÐ¾Ð»Ð½Ñ‹Ðµ Ð´ÐµÑ‚Ð°Ð»Ð¸ ÐºÐ°Ð¶Ð´Ð¾Ð³Ð¾ ÑÐ¾Ð±Ñ‹Ñ‚Ð¸Ñ    â”‚   â”‚
â”‚  â”‚ â€¢ ÐÐ½Ð°Ð»Ð¸Ñ‚Ð¸ÐºÐ°: Ð’Ð¾Ð·Ð¼Ð¾Ð¶Ð½Ð¾ÑÑ‚ÑŒ ÑÐ»Ð¾Ð¶Ð½Ñ‹Ñ… Ð·Ð°Ð¿Ñ€Ð¾ÑÐ¾Ð²       â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                         â”‚
â”‚  Ð¢ÐÐ‘Ð›Ð˜Ð¦Ð 4: trajectory_details (Ð´ÐµÑ‚Ð°Ð»ÑŒÐ½Ñ‹Ðµ Ñ‚Ñ€Ð°ÐµÐºÑ‚Ð¾Ñ€Ð¸Ð¸)  â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤   â”‚
â”‚  â”‚ â€¢ Ð¥Ñ€Ð°Ð½Ð¸Ñ‚: Ð’ÑÐµ Ñ‚Ð¾Ñ‡ÐºÐ¸ Ð²ÑÐµÑ… Ñ‚Ñ€Ð°ÐµÐºÑ‚Ð¾Ñ€Ð¸Ð¹             â”‚   â”‚
â”‚  â”‚ â€¢ ÐžÐ±ÑŠÐµÐ¼: ÐžÑ‡ÐµÐ½ÑŒ Ð±Ð¾Ð»ÑŒÑˆÐ¾Ð¹                          â”‚   â”‚
â”‚  â”‚ â€¢ ÐšÐ¾Ð¼Ð¿Ñ€ÐµÑÑÐ¸Ñ: ÐœÐ°ÐºÑÐ¸Ð¼Ð°Ð»ÑŒÐ½Ð°Ñ                      â”‚   â”‚
â”‚  â”‚ â€¢ TTL: 2 Ð³Ð¾Ð´Ð°                                   â”‚   â”‚
â”‚  â”‚ â€¢ Ð˜ÑÐ¿Ð¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ð½Ð¸Ðµ: Ð”Ð»Ñ Ð³Ð»ÑƒÐ±Ð¾ÐºÐ¾Ð³Ð¾ Ð°Ð½Ð°Ð»Ð¸Ð·Ð°         â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ðŸ” ÐšÐ°Ðº Ð½Ð°Ð¹Ñ‚Ð¸ Ð¸Ð½Ñ„Ð¾Ñ€Ð¼Ð°Ñ†Ð¸ÑŽ Ð¾ Ð¼Ð°ÑˆÐ¸Ð½Ðµ Ð² Ð·Ð°Ð²Ð¸ÑÐ¸Ð¼Ð¾ÑÑ‚Ð¸ Ð¾Ñ‚ ÑÐ¸Ñ‚ÑƒÐ°Ñ†Ð¸Ð¸

### Ð¡Ñ†ÐµÐ½Ð°Ñ€Ð¸Ð¹ 1: ÐœÐ°ÑˆÐ¸Ð½Ð° Ð¾Ð½Ð»Ð°Ð¹Ð½ (Ð¿Ñ€Ð¸ÑÑ‹Ð»Ð°Ð»Ð° Ð´Ð°Ð½Ð½Ñ‹Ðµ Ð¼ÐµÐ½ÐµÐµ 2 Ñ‡Ð°ÑÐ¾Ð² Ð½Ð°Ð·Ð°Ð´)

```
1. Ð—Ð°Ð¿Ñ€Ð¾Ñ Ð² Redis Ð¿Ð¾ ÐºÐ»ÑŽÑ‡Ñƒ vehicle:current:Ð123Ð‘Ð’
2. ÐŸÐ¾Ð»ÑƒÑ‡Ð°ÐµÐ¼ Ð¼Ð³Ð½Ð¾Ð²ÐµÐ½Ð½Ñ‹Ð¹ Ð¾Ñ‚Ð²ÐµÑ‚ (1-5 Ð¼Ñ):
   {
     "lat": 55.7558,
     "lon": 37.6176,
     "speed": 65,
     "time": "10:30:00",
     "status": "moving"
   }
3. Ð•ÑÐ»Ð¸ Ð½ÑƒÐ¶Ð½Ð° Ð¸ÑÑ‚Ð¾Ñ€Ð¸Ñ Ð·Ð° ÑÐµÐ³Ð¾Ð´Ð½Ñ:
   - Ð‘ÐµÑ€ÐµÐ¼ Ñ‚ÐµÐºÑƒÑ‰ÑƒÑŽ Ñ‚Ñ€Ð°ÐµÐºÑ‚Ð¾Ñ€Ð¸ÑŽ Ð¸Ð· Redis
   - Ð”Ð¾Ð¿Ð¾Ð»Ð½ÑÐµÐ¼ Ñ‚Ð¾Ñ‡ÐºÐ°Ð¼Ð¸ Ð¸Ð· PostgreSQL
   - Ð’Ð¾Ð·Ð²Ñ€Ð°Ñ‰Ð°ÐµÐ¼ Ð¿Ð¾Ð»Ð½ÑƒÑŽ Ñ‚Ñ€Ð°ÐµÐºÑ‚Ð¾Ñ€Ð¸ÑŽ
```

### Ð¡Ñ†ÐµÐ½Ð°Ñ€Ð¸Ð¹ 2: ÐœÐ°ÑˆÐ¸Ð½Ð° Ð½Ðµ Ð¾Ð½Ð»Ð°Ð¹Ð½ (Ð¿Ð¾ÑÐ»ÐµÐ´Ð½Ð¸Ðµ Ð´Ð°Ð½Ð½Ñ‹Ðµ 5 Ñ‡Ð°ÑÐ¾Ð² Ð½Ð°Ð·Ð°Ð´)

```
1. Ð—Ð°Ð¿Ñ€Ð¾Ñ Ð² Redis - Ð´Ð°Ð½Ð½Ñ‹Ñ… Ð½ÐµÑ‚ (TTL Ð¸ÑÑ‚ÐµÐº)
2. Ð—Ð°Ð¿Ñ€Ð¾Ñ Ð² PostgreSQL:
   SELECT * FROM vehicle_positions 
   WHERE vehicle_id = 'Ð123Ð‘Ð’' 
   ORDER BY timestamp DESC 
   LIMIT 1;
   
   ÐžÑ‚Ð²ÐµÑ‚: ÐšÐ¾Ð¾Ñ€Ð´Ð¸Ð½Ð°Ñ‚Ñ‹ Ð½Ð° 5 Ñ‡Ð°ÑÐ¾Ð² Ð½Ð°Ð·Ð°Ð´
3. Ð•ÑÐ»Ð¸ Ð½ÑƒÐ¶Ð½Ð° Ñ‚Ñ€Ð°ÐµÐºÑ‚Ð¾Ñ€Ð¸Ñ Ð·Ð° ÑÐµÐ³Ð¾Ð´Ð½Ñ:
   SELECT * FROM vehicle_positions 
   WHERE vehicle_id = 'Ð123Ð‘Ð’' 
     AND timestamp >= '2024-01-15 00:00:00'
   ORDER BY timestamp;
   
   ÐžÑ‚Ð²ÐµÑ‚: Ð’ÑÐµ Ñ‚Ð¾Ñ‡ÐºÐ¸ Ð·Ð° ÑÐµÐ³Ð¾Ð´Ð½Ñ
```

### Ð¡Ñ†ÐµÐ½Ð°Ñ€Ð¸Ð¹ 3: ÐÑƒÐ¶Ð½Ð° Ð¸ÑÑ‚Ð¾Ñ€Ð¸Ñ Ð·Ð° Ð¿Ð¾ÑÐ»ÐµÐ´Ð½Ð¸Ð¹ Ð¼ÐµÑÑÑ†

```
1. Ð”Ð»Ñ Ð¿Ð¾ÑÐ»ÐµÐ´Ð½Ð¸Ñ… 30 Ð´Ð½ÐµÐ¹ Ð¸ÑÐ¿Ð¾Ð»ÑŒÐ·ÑƒÐµÐ¼ PostgreSQL:
   SELECT * FROM vehicle_positions 
   WHERE vehicle_id = 'Ð123Ð‘Ð’' 
     AND timestamp >= NOW() - INTERVAL '30 days'
   ORDER BY timestamp;
   
   (Ð•ÑÐ»Ð¸ Ñ‚Ð¾Ñ‡ÐµÐº Ñ‚Ñ‹ÑÑÑ‡Ð¸ - Ð²Ð¾Ð·Ð²Ñ€Ð°Ñ‰Ð°ÐµÐ¼ ÑƒÐ¿Ñ€Ð¾Ñ‰ÐµÐ½Ð½ÑƒÑŽ Ð²ÐµÑ€ÑÐ¸ÑŽ)
   
2. Ð”Ð»Ñ Ð¾Ñ‚Ð¾Ð±Ñ€Ð°Ð¶ÐµÐ½Ð¸Ñ Ð½Ð° ÐºÐ°Ñ€Ñ‚Ðµ:
   - Ð‘ÐµÑ€ÐµÐ¼ ÑƒÐ¿Ñ€Ð¾Ñ‰ÐµÐ½Ð½ÑƒÑŽ Ñ‚Ñ€Ð°ÐµÐºÑ‚Ð¾Ñ€Ð¸ÑŽ Ð¸Ð· trajectories
   - Ð”Ð¾Ð±Ð°Ð²Ð»ÑÐµÐ¼ Ð¼Ð°Ñ€ÐºÐµÑ€Ñ‹ ÑÐ¾Ð±Ñ‹Ñ‚Ð¸Ð¹ Ð¸Ð· events
   - Ð’Ð¾Ð·Ð²Ñ€Ð°Ñ‰Ð°ÐµÐ¼ Ð³Ð¾Ñ‚Ð¾Ð²ÑƒÑŽ Ð»Ð¸Ð½Ð¸ÑŽ Ñ ÑÐ¾Ð±Ñ‹Ñ‚Ð¸ÑÐ¼Ð¸
```

### Ð¡Ñ†ÐµÐ½Ð°Ñ€Ð¸Ð¹ 4: ÐÑƒÐ¶Ð½Ð° Ð¸ÑÑ‚Ð¾Ñ€Ð¸Ñ Ð·Ð° Ð¿Ð¾ÑÐ»ÐµÐ´Ð½Ð¸Ð¹ Ð³Ð¾Ð´

```
1. Ð”Ð»Ñ Ð°Ð³Ñ€ÐµÐ³Ð¸Ñ€Ð¾Ð²Ð°Ð½Ð½Ñ‹Ñ… Ð´Ð°Ð½Ð½Ñ‹Ñ… (Ð¿Ñ€Ð¾Ð±ÐµÐ³ Ð¿Ð¾ Ð´Ð½ÑÐ¼):
   SELECT date, sum(distance) 
   FROM daily_aggregates 
   WHERE vehicle_id = 'Ð123Ð‘Ð’' 
     AND date >= '2023-01-01'
   GROUP BY date;
   
2. Ð”Ð»Ñ Ð´ÐµÑ‚Ð°Ð»ÑŒÐ½Ñ‹Ñ… Ñ‚Ñ€Ð°ÐµÐºÑ‚Ð¾Ñ€Ð¸Ð¹ Ð·Ð° ÐºÐ¾Ð½ÐºÑ€ÐµÑ‚Ð½Ñ‹Ð¹ Ð¼ÐµÑÑÑ†:
   SELECT * FROM gps_points 
   WHERE vehicle_id = 'Ð123Ð‘Ð’' 
     AND date >= '2023-06-01' 
     AND date <= '2023-06-30'
   ORDER BY timestamp;
   
3. Ð•ÑÐ»Ð¸ Ð½ÑƒÐ¶Ð½Ð¾ Ð¾Ñ‚Ð¾Ð±Ñ€Ð°Ð·Ð¸Ñ‚ÑŒ Ð½Ð° ÐºÐ°Ñ€Ñ‚Ðµ:
   - Ð¡Ð¸Ð»ÑŒÐ½Ð¾ ÑƒÐ¿Ñ€Ð¾Ñ‰Ð°ÐµÐ¼ Ñ‚Ñ€Ð°ÐµÐºÑ‚Ð¾Ñ€Ð¸ÑŽ (1 Ñ‚Ð¾Ñ‡ÐºÐ° Ð² Ñ‡Ð°Ñ)
   - ÐŸÐ¾ÐºÐ°Ð·Ñ‹Ð²Ð°ÐµÐ¼ Ð¾Ð±Ñ‰Ð¸Ð¹ Ð¿ÑƒÑ‚ÑŒ Ð±ÐµÐ· Ð´ÐµÑ‚Ð°Ð»ÐµÐ¹
```

## ðŸš€ ÐŸÑ€Ð¾Ñ†ÐµÑÑ Ð¾Ð±Ð½Ð¾Ð²Ð»ÐµÐ½Ð¸Ñ Ð´Ð°Ð½Ð½Ñ‹Ñ… Ð² Ñ…Ñ€Ð°Ð½Ð¸Ð»Ð¸Ñ‰Ð°Ñ…

### ÐŸÑ€Ð¸ Ð¿Ð¾Ð»ÑƒÑ‡ÐµÐ½Ð¸Ð¸ Ð½Ð¾Ð²Ð¾Ð¹ Ñ‚Ð¾Ñ‡ÐºÐ¸ Ð¾Ñ‚ Ð¼Ð°ÑˆÐ¸Ð½Ñ‹:

```
1. Ingestion Service Ð¿Ð¾Ð»ÑƒÑ‡Ð°ÐµÑ‚ Ð´Ð°Ð½Ð½Ñ‹Ðµ â†’ Kafka
2. Processing Service Ð¾Ð±Ñ€Ð°Ð±Ð°Ñ‚Ñ‹Ð²Ð°ÐµÑ‚ â†’ Ð¾Ñ‚Ð¿Ñ€Ð°Ð²Ð»ÑÐµÑ‚ Ð² Ð½ÐµÑÐºÐ¾Ð»ÑŒÐºÐ¾ Ð¼ÐµÑÑ‚:
   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
   â”‚  Ð’ Redis:                                       â”‚
   â”‚  â€¢ ÐžÐ±Ð½Ð¾Ð²Ð»ÑÐµÑ‚ vehicle:current:Ð123Ð‘Ð’            â”‚
   â”‚  â€¢ Ð”Ð¾Ð±Ð°Ð²Ð»ÑÐµÑ‚ Ñ‚Ð¾Ñ‡ÐºÑƒ Ð² trajectory:current:Ð123Ð‘Ð’ â”‚
   â”‚  â€¢ ÐžÐ±Ð½Ð¾Ð²Ð»ÑÐµÑ‚ Ð³ÐµÐ¾Ð¸Ð½Ð´ÐµÐºÑ                         â”‚
   â”‚  Ð’Ñ€ÐµÐ¼Ñ: 5-10 Ð¼Ñ                                â”‚
   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
   
   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
   â”‚  Ð’ PostgreSQL:                                  â”‚
   â”‚  â€¢ Ð”Ð¾Ð±Ð°Ð²Ð»ÑÐµÑ‚ ÑÑ‚Ñ€Ð¾ÐºÑƒ Ð² vehicle_positions        â”‚
   â”‚  â€¢ Ð•ÑÐ»Ð¸ ÑÐ¾Ð±Ñ‹Ñ‚Ð¸Ðµ â†’ Ð´Ð¾Ð±Ð°Ð²Ð»ÑÐµÑ‚ Ð² events           â”‚
   â”‚  â€¢ Ð•ÑÐ»Ð¸ Ð·Ð°ÐºÐ¾Ð½Ñ‡Ð¸Ð»Ð°ÑÑŒ Ð¿Ð¾ÐµÐ·Ð´ÐºÐ° â†’ ÑÐ¾Ð·Ð´Ð°ÐµÑ‚          â”‚
   â”‚    Ñ‚Ñ€Ð°ÐµÐºÑ‚Ð¾Ñ€Ð¸ÑŽ Ð² trajectories                   â”‚
   â”‚  Ð’Ñ€ÐµÐ¼Ñ: 50-200 Ð¼Ñ                              â”‚
   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
   
   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
   â”‚  Ð’ ClickHouse:                                  â”‚
   â”‚  â€¢ Ð”Ð¾Ð±Ð°Ð²Ð»ÑÐµÑ‚ Ñ‚Ð¾Ñ‡ÐºÑƒ Ð² gps_points                â”‚
   â”‚  â€¢ ÐžÐ±Ð½Ð¾Ð²Ð»ÑÐµÑ‚ daily_aggregates (Ñ€Ð°Ð· Ð² Ñ‡Ð°Ñ)      â”‚
   â”‚  â€¢ Ð•ÑÐ»Ð¸ ÑÐ¾Ð±Ñ‹Ñ‚Ð¸Ðµ â†’ Ð´Ð¾Ð±Ð°Ð²Ð»ÑÐµÑ‚ Ð² events_history   â”‚
   â”‚  Ð’Ñ€ÐµÐ¼Ñ: 100-500 Ð¼Ñ (batch Ð¾Ð±Ñ€Ð°Ð±Ð¾Ñ‚ÐºÐ°)           â”‚
   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
3. Real-time Service Ð·Ð°Ð±Ð¸Ñ€Ð°ÐµÑ‚ Ð¸Ð· Redis â†’ Ð¾Ñ‚Ð¿Ñ€Ð°Ð²Ð»ÑÐµÑ‚ ÐºÐ»Ð¸ÐµÐ½Ñ‚Ð°Ð¼
```

## ðŸ’¾ Ð¡Ñ‚Ñ€Ð°Ñ‚ÐµÐ³Ð¸Ñ ÑƒÐ´Ð°Ð»ÐµÐ½Ð¸Ñ ÑÑ‚Ð°Ñ€Ñ‹Ñ… Ð´Ð°Ð½Ð½Ñ‹Ñ…

### ÐÐ²Ñ‚Ð¾Ð¼Ð°Ñ‚Ð¸Ñ‡ÐµÑÐºÐ°Ñ Ð¾Ñ‡Ð¸ÑÑ‚ÐºÐ°:

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                     REDIS                               â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ â€¢ Ð¢ÐµÐºÑƒÑ‰Ð¸Ðµ Ð¿Ð¾Ð·Ð¸Ñ†Ð¸Ð¸: TTL 2 Ñ‡Ð°ÑÐ°                          â”‚
â”‚ â€¢ ÐÐºÑ‚Ð¸Ð²Ð½Ñ‹Ðµ Ñ‚Ñ€Ð°ÐµÐºÑ‚Ð¾Ñ€Ð¸Ð¸: TTL 24 Ñ‡Ð°ÑÐ°                     â”‚
â”‚ â€¢ ÐšÑÑˆ Ð´Ð°Ð½Ð½Ñ‹Ñ…: TTL 5-60 Ð¼Ð¸Ð½ÑƒÑ‚                           â”‚
â”‚ â€¢ Ð¡ÐµÑÑÐ¸Ð¸: TTL 1 Ñ‡Ð°Ñ Ð½ÐµÐ°ÐºÑ‚Ð¸Ð²Ð½Ð¾ÑÑ‚Ð¸                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    POSTGRESQL                           â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ â€¢ ÐŸÐ¾Ð·Ð¸Ñ†Ð¸Ð¸: Ð£Ð´Ð°Ð»ÑÑŽÑ‚ÑÑ Ñ‡ÐµÑ€ÐµÐ· 30 Ð´Ð½ÐµÐ¹                     â”‚
â”‚   (DROP ÑÑ‚Ð°Ñ€Ñ‹Ñ… Ð¿Ð°Ñ€Ñ‚Ð¸Ñ†Ð¸Ð¹)                               â”‚
â”‚ â€¢ Ð¡Ð¾Ð±Ñ‹Ñ‚Ð¸Ñ: Ð£Ð´Ð°Ð»ÑÑŽÑ‚ÑÑ Ñ‡ÐµÑ€ÐµÐ· 90 Ð´Ð½ÐµÐ¹                     â”‚
â”‚ â€¢ Ð¢Ñ€Ð°ÐµÐºÑ‚Ð¾Ñ€Ð¸Ð¸: Ð£Ð´Ð°Ð»ÑÑŽÑ‚ÑÑ Ñ‡ÐµÑ€ÐµÐ· 90 Ð´Ð½ÐµÐ¹                  â”‚
â”‚ â€¢ Ð¡Ð¿Ñ€Ð°Ð²Ð¾Ñ‡Ð½Ð¸ÐºÐ¸: ÐÐµ ÑƒÐ´Ð°Ð»ÑÑŽÑ‚ÑÑ (Ð¼Ð°ÑˆÐ¸Ð½Ñ‹, Ð²Ð¾Ð´Ð¸Ñ‚ÐµÐ»Ð¸)        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    CLICKHOUSE                           â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ â€¢ GPS Ñ‚Ð¾Ñ‡ÐºÐ¸: TTL 2 Ð³Ð¾Ð´Ð°                                â”‚
â”‚ â€¢ Ð”Ð½ÐµÐ²Ð½Ñ‹Ðµ Ð°Ð³Ñ€ÐµÐ³Ð°Ñ‚Ñ‹: TTL 5 Ð»ÐµÑ‚                          â”‚
â”‚ â€¢ Ð¡Ð¾Ð±Ñ‹Ñ‚Ð¸Ñ: TTL 2 Ð³Ð¾Ð´Ð°                                  â”‚
â”‚ â€¢ ÐŸÐ¾ÑÐ»Ðµ TTL: ÐÑ€Ñ…Ð¸Ð²Ð°Ñ†Ð¸Ñ Ð² S3                            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ðŸ“ˆ ÐŸÑ€Ð¸Ð¼ÐµÑ€Ñ‹ Ð·Ð°Ð¿Ñ€Ð¾ÑÐ¾Ð² Ð´Ð»Ñ Ñ€Ð°Ð·Ð½Ñ‹Ñ… Ð½ÑƒÐ¶Ð´

### 1. "Ð“Ð´Ðµ ÑÐµÐ¹Ñ‡Ð°Ñ Ð³Ñ€ÑƒÐ·Ð¾Ð²Ð¸Ðº Ð123Ð‘Ð’?"
```sql
-- Ð¡Ð½Ð°Ñ‡Ð°Ð»Ð° Redis (Ð±Ñ‹ÑÑ‚Ñ€Ð¾), ÐµÑÐ»Ð¸ Ð½ÐµÑ‚ - PostgreSQL
SELECT lat, lon, speed, timestamp 
FROM vehicle_positions 
WHERE vehicle_id = 'Ð123Ð‘Ð’' 
ORDER BY timestamp DESC 
LIMIT 1;
```

### 2. "ÐŸÐ¾ÐºÐ°Ð·Ð°Ñ‚ÑŒ Ð¿ÑƒÑ‚ÑŒ Ð·Ð° ÑÐµÐ³Ð¾Ð´Ð½Ñ"
```sql
-- Ð‘ÐµÑ€ÐµÐ¼ ÑƒÐ¿Ñ€Ð¾Ñ‰ÐµÐ½Ð½ÑƒÑŽ Ñ‚Ñ€Ð°ÐµÐºÑ‚Ð¾Ñ€Ð¸ÑŽ Ð¸Ð· PostgreSQL
SELECT simplified_geometry 
FROM trajectories 
WHERE vehicle_id = 'Ð123Ð‘Ð’' 
  AND date = CURRENT_DATE;
```

### 3. "Ð¡ÐºÐ¾Ð»ÑŒÐºÐ¾ Ð¿Ñ€Ð¾ÐµÑ…Ð°Ð» Ð·Ð° Ð¼ÐµÑÑÑ†"
```sql
-- Ð˜ÑÐ¿Ð¾Ð»ÑŒÐ·ÑƒÐµÐ¼ Ð°Ð³Ñ€ÐµÐ³Ð¸Ñ€Ð¾Ð²Ð°Ð½Ð½Ñ‹Ðµ Ð´Ð°Ð½Ð½Ñ‹Ðµ Ð¸Ð· ClickHouse
SELECT sum(distance_km) 
FROM daily_aggregates 
WHERE vehicle_id = 'Ð123Ð‘Ð’' 
  AND month = '2024-01';
```

### 4. "Ð“Ð´Ðµ Ð±Ñ‹Ð»Ð¸ Ð²ÑÐµ Ð¾ÑÑ‚Ð°Ð½Ð¾Ð²ÐºÐ¸ Ð²Ñ‡ÐµÑ€Ð°"
```sql
-- Ð¡Ð¾Ð±Ñ‹Ñ‚Ð¸Ñ Ð¸Ð· PostgreSQL
SELECT event_type, lat, lon, timestamp 
FROM events 
WHERE vehicle_id = 'Ð123Ð‘Ð’' 
  AND date = CURRENT_DATE - 1 
  AND event_type = 'stop';
```

## ðŸŽ¯ ÐšÐ»ÑŽÑ‡ÐµÐ²Ñ‹Ðµ Ð¿Ñ€Ð¸Ð½Ñ†Ð¸Ð¿Ñ‹ Ñ…Ñ€Ð°Ð½ÐµÐ½Ð¸Ñ

1. **Ð“Ð¾Ñ€ÑÑ‡Ð¸Ðµ Ð´Ð°Ð½Ð½Ñ‹Ðµ Ð² Ð¿Ð°Ð¼ÑÑ‚Ð¸** (Redis) - Ð´Ð»Ñ ÑÐºÐ¾Ñ€Ð¾ÑÑ‚Ð¸
2. **Ð¢ÐµÐ¿Ð»Ñ‹Ðµ Ð´Ð°Ð½Ð½Ñ‹Ðµ Ð² PostgreSQL** - Ð´Ð»Ñ Ð¾Ð¿ÐµÑ€Ð°Ñ†Ð¸Ð¾Ð½Ð½Ð¾Ð¹ Ñ€Ð°Ð±Ð¾Ñ‚Ñ‹
3. **Ð¥Ð¾Ð»Ð¾Ð´Ð½Ñ‹Ðµ Ð´Ð°Ð½Ð½Ñ‹Ðµ Ð² ClickHouse** - Ð´Ð»Ñ Ð°Ð½Ð°Ð»Ð¸Ñ‚Ð¸ÐºÐ¸
4. **ÐÑ€Ñ…Ð¸Ð²Ð½Ñ‹Ðµ Ð´Ð°Ð½Ð½Ñ‹Ðµ Ð² S3** - Ð´Ð»Ñ Ð´Ð¾Ð»Ð³Ð¾ÑÑ€Ð¾Ñ‡Ð½Ð¾Ð³Ð¾ Ñ…Ñ€Ð°Ð½ÐµÐ½Ð¸Ñ

5. **Ð§ÐµÐ¼ ÑÑ‚Ð°Ñ€ÐµÐµ Ð´Ð°Ð½Ð½Ñ‹Ðµ - Ñ‚ÐµÐ¼ Ð±Ð¾Ð»ÑŒÑˆÐµ Ð°Ð³Ñ€ÐµÐ³Ð°Ñ†Ð¸Ñ**:
   - Ð¡Ð²ÐµÐ¶Ð¸Ðµ: ÐšÐ°Ð¶Ð´Ð°Ñ Ñ‚Ð¾Ñ‡ÐºÐ° (ÑÐµÐºÑƒÐ½Ð´Ñ‹)
   - ÐÐµÐ´ÐµÐ»ÑŒÐ½Ñ‹Ðµ: Ð£Ð¿Ñ€Ð¾Ñ‰ÐµÐ½Ð½Ñ‹Ðµ Ñ‚Ñ€Ð°ÐµÐºÑ‚Ð¾Ñ€Ð¸Ð¸ (Ð¼Ð¸Ð½ÑƒÑ‚Ñ‹)
   - ÐœÐµÑÑÑ‡Ð½Ñ‹Ðµ: ÐÐ³Ñ€ÐµÐ³Ð¸Ñ€Ð¾Ð²Ð°Ð½Ð½Ñ‹Ðµ Ð¿Ð¾ Ñ‡Ð°ÑÐ°Ð¼
   - Ð“Ð¾Ð´Ð¾Ð²Ñ‹Ðµ: ÐÐ³Ñ€ÐµÐ³Ð¸Ñ€Ð¾Ð²Ð°Ð½Ð½Ñ‹Ðµ Ð¿Ð¾ Ð´Ð½ÑÐ¼

6. **ÐÐ²Ñ‚Ð¾Ð¼Ð°Ñ‚Ð¸Ñ‡ÐµÑÐºÐ°Ñ Ð¼Ð¸Ð³Ñ€Ð°Ñ†Ð¸Ñ** Ð¼ÐµÐ¶Ð´Ñƒ ÑƒÑ€Ð¾Ð²Ð½ÑÐ¼Ð¸ Ñ…Ñ€Ð°Ð½ÐµÐ½Ð¸Ñ
7. **Ð Ð°Ð·Ð½Ñ‹Ðµ Ñ„Ð¾Ñ€Ð¼Ð°Ñ‚Ñ‹ Ð´Ð»Ñ Ñ€Ð°Ð·Ð½Ñ‹Ñ… Ð½ÑƒÐ¶Ð´**:
   - Ð”Ð»Ñ ÐºÐ°Ñ€Ñ‚Ñ‹: Ð£Ð¿Ñ€Ð¾Ñ‰ÐµÐ½Ð½Ñ‹Ðµ Ð³ÐµÐ¾Ð¼ÐµÑ‚Ñ€Ð¸Ð¸
   - Ð”Ð»Ñ Ð¾Ñ‚Ñ‡ÐµÑ‚Ð¾Ð²: ÐÐ³Ñ€ÐµÐ³Ð¸Ñ€Ð¾Ð²Ð°Ð½Ð½Ñ‹Ðµ Ñ‡Ð¸ÑÐ»Ð°
   - Ð”Ð»Ñ Ð°Ð½Ð°Ð»Ð¸Ð·Ð°: Ð”ÐµÑ‚Ð°Ð»ÑŒÐ½Ñ‹Ðµ Ð´Ð°Ð½Ð½Ñ‹Ðµ

Ð­Ñ‚Ð° ÑÐ¸ÑÑ‚ÐµÐ¼Ð° Ñ…Ñ€Ð°Ð½ÐµÐ½Ð¸Ñ Ð¾Ð±ÐµÑÐ¿ÐµÑ‡Ð¸Ð²Ð°ÐµÑ‚:
- **ÐœÐ³Ð½Ð¾Ð²ÐµÐ½Ð½Ñ‹Ð¹ Ð´Ð¾ÑÑ‚ÑƒÐ¿** Ðº Ð°ÐºÑ‚ÑƒÐ°Ð»ÑŒÐ½Ñ‹Ð¼ Ð´Ð°Ð½Ð½Ñ‹Ð¼
- **Ð‘Ñ‹ÑÑ‚Ñ€Ñ‹Ð¹ Ð¿Ð¾Ð¸ÑÐº** Ð¸ÑÑ‚Ð¾Ñ€Ð¸Ð¸ Ð·Ð° Ð½ÐµÐ´ÐµÐ»Ð¸
- **Ð“Ð»ÑƒÐ±Ð¾ÐºÐ¸Ð¹ Ð°Ð½Ð°Ð»Ð¸Ð·** Ð·Ð° Ð³Ð¾Ð´Ñ‹
- **Ð­Ñ„Ñ„ÐµÐºÑ‚Ð¸Ð²Ð½Ð¾Ðµ Ð¸ÑÐ¿Ð¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ð½Ð¸Ðµ** Ñ€ÐµÑÑƒÑ€ÑÐ¾Ð² Ñ…Ñ€Ð°Ð½ÐµÐ½Ð¸Ñ