https://habr.com/ru/articles/875794/

Паттерн "Стратегия" — это выбор способа действия из нескольких вариантов. Мы создаём **набор алгоритмов** (или стратегий), а потом можем переключаться между ними, не меняя основную логику программы.

Представь, что ты идёшь в магазин. У тебя есть 2 варианта:

1. Оплатить картой
    
2. Оплатить наличными
    

Магазин предоставляет одинаковую услугу (покупку товара), но ты выбираешь, как заплатить, в зависимости от ситуации.

```go
package main

import "fmt"

// Интерфейс, который определяет стратегию оплаты
type PaymentStrategy interface {
    Pay(amount float64)
}

// Стратегия оплаты картой
type CardPayment struct{}

func (c *CardPayment) Pay(amount float64) {
    fmt.Printf("Оплата картой: %.2f рублей\n", amount)
}

// Стратегия оплаты наличными
type CashPayment struct{}

func (c *CashPayment) Pay(amount float64) {
    fmt.Printf("Оплата наличными: %.2f рублей\n", amount)
}

// Контекст, который использует одну из стратегий
type Shop struct {
    paymentStrategy PaymentStrategy
}

func (s *Shop) SetPaymentStrategy(strategy PaymentStrategy) {
    s.paymentStrategy = strategy
}

func (s *Shop) MakePayment(amount float64) {
    s.paymentStrategy.Pay(amount)
}

func main() {
    // Создаем магазин
    shop := &Shop{}
    
    // Платим картой
    shop.SetPaymentStrategy(&CardPayment{})
    shop.MakePayment(1000.50)
    
    // Платим наличными
    shop.SetPaymentStrategy(&CashPayment{})
    shop.MakePayment(500.75)
}
```

#### Пояснение:

1. **Интерфейс** `PaymentStrategy`:
    
    - Это интерфейс, который определяет метод `Pay(amount float64)`, который будет реализован различными стратегиями оплаты.
        
    - Все стратегии должны реализовывать этот интерфейс, обеспечивая тем самым различное поведение для оплаты.
        
2. **Конкретные стратегии оплаты**:
    
    - `CardPayment` (оплата картой): Реализует метод `Pay()`, который выводит сообщение о платеже с картой.
        
    - `CashPayment` (оплата наличными): Реализует метод `Pay()`, который выводит сообщение о платеже наличными.
        
3. **Контекст** `Shop`:
    
    - В классе `Shop` хранится ссылка на объект, который реализует интерфейс `PaymentStrategy`.
        
    - Метод `SetPaymentStrategy(strategy PaymentStrategy)` позволяет устанавливать стратегию оплаты.
        
    - Метод `MakePayment(amount float64)` вызывает метод `Pay()` у установленной стратегии для выполнения оплаты.
        
4. **Основная программа (**`main`):
    
    - Создается объект магазина `shop`.
        
    - Сначала устанавливается стратегия оплаты картой с помощью `SetPaymentStrategy(&CardPayment{})`, и затем вызывается метод `MakePayment()`, чтобы совершить оплату картой.
        
    - Далее стратегия меняется на оплату наличными с помощью `SetPaymentStrategy(&CashPayment{})`, и снова вызывается `MakePayment()` для