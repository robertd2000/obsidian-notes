# 1 - –±–∞–∑–æ–≤—ã–µ —Ç–∏–ø—ã –¥–∞–Ω–Ω—ã—Ö
–í Go (Golang) –µ—Å—Ç—å –Ω–µ—Å–∫–æ–ª—å–∫–æ –±–∞–∑–æ–≤—ã—Ö (–≤—Å—Ç—Ä–æ–µ–Ω–Ω—ã—Ö) —Ç–∏–ø–æ–≤ –¥–∞–Ω–Ω—ã—Ö, –∫–æ—Ç–æ—Ä—ã–µ –º–æ–∂–Ω–æ —Ä–∞–∑–¥–µ–ª–∏—Ç—å –Ω–∞ —Å–ª–µ–¥—É—é—â–∏–µ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏:

---

### 1. **–ß–∏—Å–ª–æ–≤—ã–µ —Ç–∏–ø—ã**
#### –¶–µ–ª—ã–µ —á–∏—Å–ª–∞:
- **–ó–Ω–∞–∫–æ–≤—ã–µ** (–º–æ–≥—É—Ç –±—ã—Ç—å –æ—Ç—Ä–∏—Ü–∞—Ç–µ–ª—å–Ω—ã–º–∏):  
  `int8`, `int16`, `int32`, `int64`  
  `int` ‚Äî —Ä–∞–∑–º–µ—Ä –∑–∞–≤–∏—Å–∏—Ç –æ—Ç –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã (32 –∏–ª–∏ 64 –±–∏—Ç–∞).
- **–ë–µ–∑–∑–Ω–∞–∫–æ–≤—ã–µ** (—Ç–æ–ª—å–∫–æ –Ω–µ–æ—Ç—Ä–∏—Ü–∞—Ç–µ–ª—å–Ω—ã–µ):  
  `uint8`, `uint16`, `uint32`, `uint64`, `uint`  
  `byte` ‚Äî —Å–∏–Ω–æ–Ω–∏–º –¥–ª—è `uint8`.  
  `rune` ‚Äî —Å–∏–Ω–æ–Ω–∏–º –¥–ª—è `int32` (—Ö—Ä–∞–Ω–∏—Ç Unicode-—Å–∏–º–≤–æ–ª).
- **–ü–ª–∞—Ç—Ñ–æ—Ä–º–æ–∑–∞–≤–∏—Å–∏–º—ã–µ**:  
  `int` –∏ `uint` ‚Äî 32 –∏–ª–∏ 64 –±–∏—Ç–∞ –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç –û–°.

#### –ß–∏—Å–ª–∞ —Å –ø–ª–∞–≤–∞—é—â–µ–π —Ç–æ—á–∫–æ–π:
- `float32` ‚Äî 32-–±–∏—Ç–Ω–æ–µ —á–∏—Å–ª–æ (—Ç–æ—á–Ω–æ—Å—Ç—å ~6 –¥–µ—Å—è—Ç–∏—á–Ω—ã—Ö —Ü–∏—Ñ—Ä).
- `float64` ‚Äî 64-–±–∏—Ç–Ω–æ–µ —á–∏—Å–ª–æ (—Ç–æ—á–Ω–æ—Å—Ç—å ~15 —Ü–∏—Ñ—Ä, **–∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é**).

#### –ö–æ–º–ø–ª–µ–∫—Å–Ω—ã–µ —á–∏—Å–ª–∞:
- `complex64` (–Ω–∞ –æ—Å–Ω–æ–≤–µ `float32`).  
- `complex128` (–Ω–∞ –æ—Å–Ω–æ–≤–µ `float64`).  
–ü—Ä–∏–º–µ—Ä: `var c complex64 = 1 + 2i`.

---

### 2. **–°—Ç—Ä–æ–∫–æ–≤—ã–π —Ç–∏–ø**
- `string` ‚Äî –Ω–µ–∏–∑–º–µ–Ω—è–µ–º–∞—è –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç—å –±–∞–π—Ç (–æ–±—ã—á–Ω–æ –≤ –∫–æ–¥–∏—Ä–æ–≤–∫–µ UTF-8).  
–ü—Ä–∏–º–µ—Ä: `s := "Hello, ‰∏ñÁïå"`.

---

### 3. **–õ–æ–≥–∏—á–µ—Å–∫–∏–π —Ç–∏–ø**
- `bool` ‚Äî –ø—Ä–∏–Ω–∏–º–∞–µ—Ç –∑–Ω–∞—á–µ–Ω–∏—è `true` –∏–ª–∏ `false`.

---

### 4. **–°–ø–µ—Ü–∏–∞–ª—å–Ω—ã–µ —Ç–∏–ø—ã**
- **`byte`** ‚Äî –∞–ª–∏–∞—Å –¥–ª—è `uint8` (—á–∞—Å—Ç–æ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è –±–∏–Ω–∞—Ä–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö).  
- **`rune`** ‚Äî –∞–ª–∏–∞—Å –¥–ª—è `int32` (—Ö—Ä–∞–Ω–∏—Ç Unicode-—Å–∏–º–≤–æ–ª, –Ω–∞–ø—Ä–∏–º–µ—Ä `'A'` –∏–ª–∏ `'‰∏ñ'`).  

---

### –ü—Ä–∏–º–µ—Ä—ã –æ–±—ä—è–≤–ª–µ–Ω–∏—è –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö:
```go
var age int = 30
var price float64 = 29.99
var name string = "Alice"
var isActive bool = true
var symbol rune = '‚ô•'
var data byte = 0xFF
```

---

### –û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏:
- **–ù—É–ª–µ–≤—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è**:  
  - –ß–∏—Å–ª–∞: `0`  
  - –°—Ç—Ä–æ–∫–∏: `""` (–ø—É—Å—Ç–∞—è —Å—Ç—Ä–æ–∫–∞)  
  - –õ–æ–≥–∏—á–µ—Å–∫–∏–π —Ç–∏–ø: `false`  
- **–°—Ç–∞—Ç–∏—á–µ—Å–∫–∞—è —Ç–∏–ø–∏–∑–∞—Ü–∏—è**: —Ç–∏–ø –ø–µ—Ä–µ–º–µ–Ω–Ω–æ–π –Ω–µ–ª—å–∑—è –∏–∑–º–µ–Ω–∏—Ç—å –ø–æ—Å–ª–µ –æ–±—ä—è–≤–ª–µ–Ω–∏—è.
- **–í—ã–≤–æ–¥ —Ç–∏–ø–æ–≤**: –∫–æ–º–ø–∏–ª—è—Ç–æ—Ä –º–æ–∂–µ—Ç –æ–ø—Ä–µ–¥–µ–ª–∏—Ç—å —Ç–∏–ø –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏:  
  ```go
  x := 42      // int
  y := 3.14    // float64
  z := "Hello" // string
  ```

---

### –°—Ç—Ä–æ–≥–∞—è —Ç–∏–ø–∏–∑–∞—Ü–∏—è
Go –Ω–µ –ø–æ–∑–≤–æ–ª—è–µ—Ç —Å–º–µ—à–∏–≤–∞—Ç—å —Ç–∏–ø—ã –≤ –≤—ã—Ä–∞–∂–µ–Ω–∏—è—Ö –±–µ–∑ —è–≤–Ω–æ–≥–æ –ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏—è:  
```go
var a int32 = 10
var b int64 = 20
// –û—à–∏–±–∫–∞: invalid operation (–Ω–µ–ª—å–∑—è —Å–ª–æ–∂–∏—Ç—å int32 –∏ int64)
// result := a + b // –¢–∞–∫ –Ω–µ–ª—å–∑—è!
result := int64(a) + b // –ö–æ—Ä—Ä–µ–∫—Ç–Ω–æ
```

–ë–∞–∑–æ–≤—ã–µ —Ç–∏–ø—ã –≤ Go –æ–±–µ—Å–ø–µ—á–∏–≤–∞—é—Ç –ø—Ä–æ—Å—Ç–æ—Ç—É, –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å –∏ —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ—Å—Ç—å –¥–ª—è –Ω–∏–∑–∫–æ—É—Ä–æ–≤–Ω–µ–≤—ã—Ö –æ–ø–µ—Ä–∞—Ü–∏–π.
# 2 - –≤–Ω—É—Ç—Ä–µ–Ω–Ω–µ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–æ —Å—Ç—Ä–æ–∫–∏

–í Go —Å—Ç—Ä–æ–∫–∞ –∏–º–µ–µ—Ç —Å–ª–µ–¥—É—é—â–µ–µ –≤–Ω—É—Ç—Ä–µ–Ω–Ω–µ–µ –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏–µ:

## –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Å—Ç—Ä–æ–∫–∏

```go
// –í–Ω—É—Ç—Ä–µ–Ω–Ω–µ–µ –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏–µ (—É–ø—Ä–æ—â–µ–Ω–Ω–æ)
type stringStruct struct {
    str unsafe.Pointer // —É–∫–∞–∑–∞—Ç–µ–ª—å –Ω–∞ –º–∞—Å—Å–∏–≤ –±–∞–π—Ç
    len int           // –¥–ª–∏–Ω–∞ —Å—Ç—Ä–æ–∫–∏ –≤ –±–∞–π—Ç–∞—Ö
}
```

## –ö–ª—é—á–µ–≤—ã–µ –æ—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏

### 1. **–ù–µ–∏–∑–º–µ–Ω—è–µ–º–æ—Å—Ç—å (immutable)**
```go
s := "Hello"
// s[0] = 'h' // –û—à–∏–±–∫–∞: –Ω–µ–ª—å–∑—è –∏–∑–º–µ–Ω—è—Ç—å —Å—Ç—Ä–æ–∫—É

// –°–æ–∑–¥–∞–µ—Ç—Å—è –ù–û–í–ê–Ø —Å—Ç—Ä–æ–∫–∞
s = "hello" + " world"
```

### 2. **UTF-8 –∫–æ–¥–∏—Ä–æ–≤–∫–∞ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é**
```go
s := "–ü—Ä–∏–≤–µ—Ç"  // –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –≤ UTF-8
fmt.Println(len(s)) // 12 –±–∞–π—Ç, –∞ –Ω–µ 6 —Å–∏–º–≤–æ–ª–æ–≤!
```

### 3. **–í–Ω—É—Ç—Ä–µ–Ω–Ω–µ–µ —Ö—Ä–∞–Ω–µ–Ω–∏–µ**
```go
s := "Hello"
// –í –ø–∞–º—è—Ç–∏: | H | e | l | l | o |
//           ^
//           —É–∫–∞–∑–∞—Ç–µ–ª—å str
// –¥–ª–∏–Ω–∞ len = 5
```

## –ü—Ä–∏–º–µ—Ä—ã –¥–ª—è –ø–æ–Ω–∏–º–∞–Ω–∏—è

### –î–ª–∏–Ω–∞ –≤ –±–∞–π—Ç–∞—Ö vs —Å–∏–º–≤–æ–ª–∞—Ö
```go
s := "Hello, ‰∏ñÁïå"
fmt.Println(len(s)) // 13 –±–∞–π—Ç
fmt.Println(utf8.RuneCountInString(s)) // 9 —Å–∏–º–≤–æ–ª–æ–≤ (—Ä—É–Ω)
```

### –≠—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ–µ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ
```go
s1 := "very long string..."
s2 := s1 // –ù–µ –∫–æ–ø–∏—Ä—É–µ—Ç –¥–∞–Ω–Ω—ã–µ, —Ç–æ–ª—å–∫–æ —É–∫–∞–∑–∞—Ç–µ–ª—å!
```

## –ü—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏—è

### –°—Ç—Ä–æ–∫–∞ ‚Üí –°—Ä–µ–∑ –±–∞–π—Ç
```go
s := "Hello"
b := []byte(s) // –°–æ–∑–¥–∞–µ—Ç –ö–û–ü–ò–Æ –¥–∞–Ω–Ω—ã—Ö
b[0] = 'h'
fmt.Println(s) // "Hello" (–Ω–µ –∏–∑–º–µ–Ω–∏–ª–∞—Å—å)
```

### –°—Ä–µ–∑ –±–∞–π—Ç ‚Üí –°—Ç—Ä–æ–∫–∞
```go
b := []byte{'H', 'e', 'l', 'l', 'o'}
s := string(b) // –°–æ–∑–¥–∞–µ—Ç –ö–û–ü–ò–Æ –¥–∞–Ω–Ω—ã—Ö
b[0] = 'h'
fmt.Println(s) // "Hello" (–Ω–µ –∏–∑–º–µ–Ω–∏–ª–∞—Å—å)
```

## –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ –∫–æ–º–ø–∏–ª—è—Ç–æ—Ä–∞

### 1. **–ü—É–ª —Å—Ç—Ä–æ–∫ (string interning)**
```go
s1 := "hello"
s2 := "hello"
// –ö–æ–º–ø–∏–ª—è—Ç–æ—Ä –º–æ–∂–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –æ–¥–∏–Ω —ç–∫–∑–µ–º–ø–ª—è—Ä –≤ –ø–∞–º—è—Ç–∏
```

### 2. **–≠—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω—ã–µ –æ–ø–µ—Ä–∞—Ü–∏–∏**
```go
// –ö–æ–º–ø–∏–ª—è—Ç–æ—Ä –æ–ø—Ç–∏–º–∏–∑–∏—Ä—É–µ—Ç –∫–æ–Ω–∫–∞—Ç–µ–Ω–∞—Ü–∏—é
s := "a" + "b" + "c"
// –ú–æ–∂–µ—Ç –±—ã—Ç—å –ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–æ –≤ –æ–¥–Ω–æ–∫—Ä–∞—Ç–Ω–æ–µ —Å–æ–∑–¥–∞–Ω–∏–µ —Å—Ç—Ä–æ–∫–∏
```

## –ü—Ä–∞–∫—Ç–∏—á–µ—Å–∫–∏–µ —Å–ª–µ–¥—Å—Ç–≤–∏—è

### 1. **–≠—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ—Å—Ç—å –ø–æ–¥—Å—Ç—Ä–æ–∫**
```go
bigString := "very long text..."
sub := bigString[5:10] // –ù–µ –∫–æ–ø–∏—Ä—É–µ—Ç –¥–∞–Ω–Ω—ã–µ!
```

### 2. **–ü—Ä–æ–±–ª–µ–º—ã —Å –±–æ–ª—å—à–∏–º–∏ —Å—Ç—Ä–æ–∫–∞–º–∏**
```go
// –ü–ª–æ—Ö–æ: —Å–æ–∑–¥–∞–µ—Ç –ø—Ä–æ–º–µ–∂—É—Ç–æ—á–Ω—ã–µ –∫–æ–ø–∏–∏
var result string
for i := 0; i < 1000; i++ {
    result += "data"
}

// –•–æ—Ä–æ—à–æ: –∏—Å–ø–æ–ª—å–∑—É–µ—Ç strings.Builder
var builder strings.Builder
for i := 0; i < 1000; i++ {
    builder.WriteString("data")
}
result := builder.String()
```

## –°—Ä–∞–≤–Ω–µ–Ω–∏–µ —Å –¥—Ä—É–≥–∏–º–∏ —è–∑—ã–∫–∞–º–∏

| –Ø–∑—ã–∫ | –ò–∑–º–µ–Ω—è–µ–º–æ—Å—Ç—å | –ö–æ–¥–∏—Ä–æ–≤–∫–∞ |
|------|--------------|-----------|
| Go | –ù–µ–∏–∑–º–µ–Ω—è–µ–º–∞—è | UTF-8 |
| Java | –ù–µ–∏–∑–º–µ–Ω—è–µ–º–∞—è | UTF-16 |
| Python | –ù–µ–∏–∑–º–µ–Ω—è–µ–º–∞—è | UTF-8/16/32 |
| C++ | –ò–∑–º–µ–Ω—è–µ–º–∞—è | –ó–∞–≤–∏—Å–∏—Ç –æ—Ç —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ |

–¢–∞–∫–æ–µ –≤–Ω—É—Ç—Ä–µ–Ω–Ω–µ–µ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–æ –¥–µ–ª–∞–µ—Ç —Å—Ç—Ä–æ–∫–∏ –≤ Go —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω—ã–º–∏ –¥–ª—è –±–æ–ª—å—à–∏–Ω—Å—Ç–≤–∞ –æ–ø–µ—Ä–∞—Ü–∏–π, –Ω–æ —Ç—Ä–µ–±—É–µ—Ç –æ—Å—Ç–æ—Ä–æ–∂–Ω–æ—Å—Ç–∏ –ø—Ä–∏ —Ä–∞–±–æ—Ç–µ —Å –±–æ–ª—å—à–∏–º–∏ –æ–±—ä–µ–º–∞–º–∏ —Ç–µ–∫—Å—Ç–∞ –∏ —á–∞—Å—Ç—ã–º–∏ –º–æ–¥–∏—Ñ–∏–∫–∞—Ü–∏—è–º–∏.
# 3 - –¥–ª–∏–Ω–∞ —Å—Ç—Ä–æ–∫–∏

–í Go –µ—Å—Ç—å –¥–≤–∞ –æ—Å–Ω–æ–≤–Ω—ã—Ö —Å–ø–æ—Å–æ–±–∞ –∏–∑–º–µ—Ä–µ–Ω–∏—è –¥–ª–∏–Ω—ã —Å—Ç—Ä–æ–∫–∏, –∫–æ—Ç–æ—Ä—ã–µ –¥–∞—é—Ç —Ä–∞–∑–Ω—ã–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã:

## 1. **–î–ª–∏–Ω–∞ –≤ –±–∞–π—Ç–∞—Ö (`len(string)`)**

–§—É–Ω–∫—Ü–∏—è `len()` –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ **–±–∞–π—Ç–æ–≤** –≤ —Å—Ç—Ä–æ–∫–µ:

```go
package main

import "fmt"

func main() {
    s1 := "Hello"
    fmt.Println(len(s1)) // 5 (5 ASCII —Å–∏–º–≤–æ–ª–æ–≤ = 5 –±–∞–π—Ç)
    
    s2 := "–ü—Ä–∏–≤–µ—Ç"
    fmt.Println(len(s2)) // 12 (6 –∫–∏—Ä–∏–ª–ª–∏—á–µ—Å–∫–∏—Ö —Å–∏–º–≤–æ–ª–æ–≤ √ó 2 –±–∞–π—Ç–∞)
    
    s3 := "Hello, ‰∏ñÁïå"
    fmt.Println(len(s3)) // 13 (7 + 1 + 5 –±–∞–π—Ç)
    // H e l l o , [–ø—Ä–æ–±–µ–ª] = 7 –±–∞–π—Ç
    // ‰∏ñÁïå = 2 —Å–∏–º–≤–æ–ª–∞ √ó 3 –±–∞–π—Ç–∞ = 6 –±–∞–π—Ç
}
```

## 2. **–î–ª–∏–Ω–∞ –≤ —Å–∏–º–≤–æ–ª–∞—Ö (—Ä—É–Ω–∞—Ö)**

–î–ª—è –ø–æ–¥—Å—á–µ—Ç–∞ –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ Unicode —Å–∏–º–≤–æ–ª–æ–≤ (—Ä—É–Ω) –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ:

### –°–ø–æ—Å–æ–± 1: `utf8.RuneCountInString()`
```go
package main

import (
    "fmt"
    "unicode/utf8"
)

func main() {
    s := "Hello, ‰∏ñÁïå"
    
    fmt.Println("–ë–∞–π—Ç—ã:", len(s))         // 13
    fmt.Println("–°–∏–º–≤–æ–ª—ã:", utf8.RuneCountInString(s)) // 9
}
```

### –°–ø–æ—Å–æ–± 2: –ü—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏–µ –≤ —Å—Ä–µ–∑ —Ä—É–Ω
```go
s := "Hello, ‰∏ñÁïå"
chars := []rune(s)
fmt.Println("–°–∏–º–≤–æ–ª—ã:", len(chars)) // 9
```

## –ü—Ä–∞–∫—Ç–∏—á–µ—Å–∫–∏–µ –ø—Ä–∏–º–µ—Ä—ã

### –°—Ä–∞–≤–Ω–µ–Ω–∏–µ –ø–æ–¥—Ö–æ–¥–æ–≤
```go
texts := []string{
    "Hello",           // –¢–æ–ª—å–∫–æ ASCII
    "Caf√©",           // –° –∞–∫—Ü–µ–Ω—Ç–æ–º
    "–ü—Ä–∏–≤–µ—Ç",         // –ö–∏—Ä–∏–ª–ª–∏—Ü–∞  
    "Hello, ‰∏ñÁïå",     // –°–º–µ—à–∞–Ω–Ω—ã–π
    "üòÄüéâüåü",          // –≠–º–æ–¥–∑–∏
}

for _, text := range texts {
    bytes := len(text)
    runes := utf8.RuneCountInString(text)
    fmt.Printf("–¢–µ–∫—Å—Ç: %-10s –ë–∞–π—Ç—ã: %2d –°–∏–º–≤–æ–ª—ã: %2d\n", text, bytes, runes)
}
```

**–†–µ–∑—É–ª—å—Ç–∞—Ç:**
```
–¢–µ–∫—Å—Ç: Hello      –ë–∞–π—Ç—ã:  5 –°–∏–º–≤–æ–ª—ã:  5
–¢–µ–∫—Å—Ç: Caf√©       –ë–∞–π—Ç—ã:  5 –°–∏–º–≤–æ–ª—ã:  4
–¢–µ–∫—Å—Ç: –ü—Ä–∏–≤–µ—Ç     –ë–∞–π—Ç—ã: 12 –°–∏–º–≤–æ–ª—ã:  6
–¢–µ–∫—Å—Ç: Hello, ‰∏ñÁïå –ë–∞–π—Ç—ã: 13 –°–∏–º–≤–æ–ª—ã:  9
–¢–µ–∫—Å—Ç: üòÄüéâüåü      –ë–∞–π—Ç—ã: 12 –°–∏–º–≤–æ–ª—ã:  3
```

### –ò—Ç–µ—Ä–∞—Ü–∏—è –ø–æ —Å–∏–º–≤–æ–ª–∞–º, –∞ –Ω–µ –±–∞–π—Ç–∞–º
```go
s := "Hello, ‰∏ñÁïå"

// ‚ùå –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ - –∏—Ç–µ—Ä–∞—Ü–∏—è –ø–æ –±–∞–π—Ç–∞–º
for i := 0; i < len(s); i++ {
    fmt.Printf("%c ", s[i]) // –ò—Å–ø–æ—Ä—á–µ–Ω–Ω—ã–µ —Å–∏–º–≤–æ–ª—ã –¥–ª—è –º–Ω–æ–≥–æ–±–∞–π—Ç–æ–≤—ã—Ö
}

// ‚úÖ –ü—Ä–∞–≤–∏–ª—å–Ω–æ - –∏—Ç–µ—Ä–∞—Ü–∏—è –ø–æ —Ä—É–Ω–∞–º
for _, char := range s {
    fmt.Printf("%c ", char) // –ö–æ—Ä—Ä–µ–∫—Ç–Ω–æ –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç –≤—Å–µ —Å–∏–º–≤–æ–ª—ã
}
```

## –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å

- **`len(string)`** - O(1) –æ–ø–µ—Ä–∞—Ü–∏—è, —Ç–∞–∫ –∫–∞–∫ –¥–ª–∏–Ω–∞ —Ö—Ä–∞–Ω–∏—Ç—Å—è –≤ —Å—Ç—Ä—É–∫—Ç—É—Ä–µ —Å—Ç—Ä–æ–∫–∏
- **`utf8.RuneCountInString()`** - O(n) –æ–ø–µ—Ä–∞—Ü–∏—è, —Ç—Ä–µ–±—É–µ—Ç –ø—Ä–æ—Ö–æ–¥–∞ –ø–æ –≤—Å–µ–π —Å—Ç—Ä–æ–∫–µ
- **`len([]rune(string))`** - O(n) + –≤—ã–¥–µ–ª–µ–Ω–∏–µ –ø–∞–º—è—Ç–∏ –ø–æ–¥ —Å—Ä–µ–∑

## –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏

```go
// –î–ª—è ASCII —Ç–µ–∫—Å—Ç–∞ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ len()
if len(username) < 3 {
    return errors.New("–∏–º—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è —Å–ª–∏—à–∫–æ–º –∫–æ—Ä–æ—Ç–∫–æ–µ")
}

// –î–ª—è Unicode —Ç–µ–∫—Å—Ç–∞ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ utf8.RuneCountInString()
if utf8.RuneCountInString(displayName) > 20 {
    return errors.New("–æ—Ç–æ–±—Ä–∞–∂–∞–µ–º–æ–µ –∏–º—è —Å–ª–∏—à–∫–æ–º –¥–ª–∏–Ω–Ω–æ–µ")
}

// –î–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ –ø—É—Å—Ç–æ–π —Å—Ç—Ä–æ–∫–∏ –æ–±–∞ —Å–ø–æ—Å–æ–±–∞ —ç–∫–≤–∏–≤–∞–ª–µ–Ω—Ç–Ω—ã
if len(s) == 0 {
    // –∏–ª–∏ if utf8.RuneCountInString(s) == 0 {
    fmt.Println("–°—Ç—Ä–æ–∫–∞ –ø—É—Å—Ç–∞—è")
}
```

**–í—ã–≤–æ–¥:** –í—Å–µ–≥–¥–∞ —É—á–∏—Ç—ã–≤–∞–π—Ç–µ —Ä–∞–∑–Ω–∏—Ü—É –º–µ–∂–¥—É –¥–ª–∏–Ω–æ–π –≤ –±–∞–π—Ç–∞—Ö –∏ –¥–ª–∏–Ω–æ–π –≤ —Å–∏–º–≤–æ–ª–∞—Ö, –æ—Å–æ–±–µ–Ω–Ω–æ –ø—Ä–∏ —Ä–∞–±–æ—Ç–µ —Å Unicode —Ç–µ–∫—Å—Ç–æ–º.
# 4 - –ö–∞–∫ —É—Å—Ç—Ä–æ–µ–Ω—ã –º–∞–ø—ã –≤ GO

Map (–∞—Å—Å–æ—Ü–∏–∞—Ç–∏–≤–Ω—ã–π –º–∞—Å—Å–∏–≤) –≤ Go ‚Äî —ç—Ç–æ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è —Ö—ç—à-—Ç–∞–±–ª–∏—Ü—ã, –æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω–∞—è –¥–ª—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ –∏ –ø–∞–º—è—Ç–∏.

## –û—Å–Ω–æ–≤–Ω–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞

Map —Å–æ—Å—Ç–æ–∏—Ç –∏–∑ –¥–≤—É—Ö –æ—Å–Ω–æ–≤–Ω—ã—Ö –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤:

**hmap** - –∑–∞–≥–æ–ª–æ–≤–æ–∫ map, —Å–æ–¥–µ—Ä–∂–∞—â–∏–π –º–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ:
- count - —Ç–µ–∫—É—â–µ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —ç–ª–µ–º–µ–Ω—Ç–æ–≤
- B - –ø–æ–∫–∞–∑–∞—Ç–µ–ª—å —Ä–∞–∑–º–µ—Ä–∞ (–∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –±–∞–∫–µ—Ç–æ–≤ = 2^B)
- buckets - —É–∫–∞–∑–∞—Ç–µ–ª—å –Ω–∞ –º–∞—Å—Å–∏–≤ –±–∞–∫–µ—Ç–æ–≤
- oldbuckets - —É–∫–∞–∑–∞—Ç–µ–ª—å –Ω–∞ —Å—Ç–∞—Ä—É—é —Ç–∞–±–ª–∏—Ü—É –≤–æ –≤—Ä–µ–º—è —Ä–æ—Å—Ç–∞
- hash0 - seed –¥–ª—è —Ö—ç—à-—Ñ—É–Ω–∫—Ü–∏–∏

**bmap** - –±–∞–∫–µ—Ç (–∫–æ—Ä–∑–∏–Ω–∞), —Å–æ–¥–µ—Ä–∂–∞—â–∏–π:
- tophash - –º–∞—Å—Å–∏–≤ –∏–∑ 8 –≤–µ—Ä—Ö–Ω–∏—Ö –±–∏—Ç–æ–≤ —Ö—ç—à–µ–π –¥–ª—è –±—ã—Å—Ç—Ä–æ–≥–æ –ø–æ–∏—Å–∫–∞
- –∫–ª—é—á–∏ –∏ –∑–Ω–∞—á–µ–Ω–∏—è (–æ–±—ã—á–Ω–æ –ø–æ 8 –ø–∞—Ä –Ω–∞ –±–∞–∫–µ—Ç)
- overflow pointer - —É–∫–∞–∑–∞—Ç–µ–ª—å –Ω–∞ –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–π –±–∞–∫–µ—Ç –ø—Ä–∏ –ø–µ—Ä–µ–ø–æ–ª–Ω–µ–Ω–∏–∏

## –û—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö

–î–∞–Ω–Ω—ã–µ –≤ map –æ—Ä–≥–∞–Ω–∏–∑–æ–≤–∞–Ω—ã —Å–ª–µ–¥—É—é—â–∏–º –æ–±—Ä–∞–∑–æ–º:

1. **–•—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ**: –ü—Ä–∏ –≤—Å—Ç–∞–≤–∫–µ –∫–ª—é—á–∞ –≤—ã—á–∏—Å–ª—è–µ—Ç—Å—è —Ö—ç—à-—Ñ—É–Ω–∫—Ü–∏—è
2. **–û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –±–∞–∫–µ—Ç–∞**: –ú–ª–∞–¥—à–∏–µ –±–∏—Ç—ã —Ö—ç—à–∞ –æ–ø—Ä–µ–¥–µ–ª—è—é—Ç –Ω–æ–º–µ—Ä –±–∞–∫–µ—Ç–∞
3. **–ë—ã—Å—Ç—Ä—ã–π –ø–æ–∏—Å–∫**: –í –±–∞–∫–µ—Ç–µ —Å–Ω–∞—á–∞–ª–∞ —Å—Ä–∞–≤–Ω–∏–≤–∞—é—Ç—Å—è tophash –∑–Ω–∞—á–µ–Ω–∏—è
4. **–¢–æ—á–Ω–æ–µ —Å—Ä–∞–≤–Ω–µ–Ω–∏–µ**: –ü—Ä–∏ —Å–æ–≤–ø–∞–¥–µ–Ω–∏–∏ tophash —Å—Ä–∞–≤–Ω–∏–≤–∞—é—Ç—Å—è —Å–∞–º–∏ –∫–ª—é—á–∏

## –ú–µ—Ö–∞–Ω–∏–∑–º —Ä–æ—Å—Ç–∞

Map —Ä–∞—Å—Ç–µ—Ç –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏ –ø–æ –º–µ—Ä–µ –¥–æ–±–∞–≤–ª–µ–Ω–∏—è —ç–ª–µ–º–µ–Ω—Ç–æ–≤:

- **–£—Å–ª–æ–≤–∏–µ —Ä–æ—Å—Ç–∞**: –ö–æ–≥–¥–∞ —Å—Ä–µ–¥–Ω—è—è –Ω–∞–≥—Ä—É–∑–∫–∞ –ø—Ä–µ–≤—ã—à–∞–µ—Ç 6.5 —ç–ª–µ–º–µ–Ω—Ç–æ–≤ –Ω–∞ –±–∞–∫–µ—Ç
- **–ü—Ä–æ—Ü–µ—Å—Å —Ä–æ—Å—Ç–∞**: –°–æ–∑–¥–∞–µ—Ç—Å—è –Ω–æ–≤–∞—è —Ç–∞–±–ª–∏—Ü–∞ –≤ 2 —Ä–∞–∑–∞ –±–æ–ª—å—à–µ
- **–ü–æ—Å—Ç–µ–ø–µ–Ω–Ω–∞—è –º–∏–≥—Ä–∞—Ü–∏—è**: –≠–ª–µ–º–µ–Ω—Ç—ã –ø–µ—Ä–µ–Ω–æ—Å—è—Ç—Å—è –ø–æ—Å—Ç–µ–ø–µ–Ω–Ω–æ –ø—Ä–∏ –ø–æ—Å–ª–µ–¥—É—é—â–∏—Ö –æ–ø–µ—Ä–∞—Ü–∏—è—Ö
- **–ò–Ω–∫—Ä–µ–º–µ–Ω—Ç–∞–ª—å–Ω–æ—Å—Ç—å**: –ó–∞ –æ–¥–Ω—É –æ–ø–µ—Ä–∞—Ü–∏—é –ø–µ—Ä–µ–Ω–æ—Å–∏—Ç—Å—è –æ–¥–∏–Ω –±–∞–∫–µ—Ç

## –û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏

- **–õ–æ–∫–∞–ª–∏–∑–∞—Ü–∏—è –ø–∞–º—è—Ç–∏**: –ö–ª—é—á–∏ –∏ –∑–Ω–∞—á–µ–Ω–∏—è —Ö—Ä–∞–Ω—è—Ç—Å—è —Ä–∞–∑–¥–µ–ª—å–Ω–æ –≤–Ω—É—Ç—Ä–∏ –±–∞–∫–µ—Ç–∞ –¥–ª—è —É–ª—É—á—à–µ–Ω–∏—è –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏—è
- **–ë—ã—Å—Ç—Ä—ã–π –ø–æ–∏—Å–∫**: tophash –ø–æ–∑–≤–æ–ª—è–µ—Ç –±—ã—Å—Ç—Ä–æ –æ—Ç—Å–µ—á—å –Ω–µ—Å–æ–≤–ø–∞–¥–∞—é—â–∏–µ –∫–ª—é—á–∏
- **–û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –¥–ª—è –º–∞–ª–µ–Ω—å–∫–∏—Ö map**: –î–ª—è map –¥–æ 8 —ç–ª–µ–º–µ–Ω—Ç–æ–≤ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è —Å–ø–µ—Ü–∏–∞–ª—å–Ω–∞—è –±—ã—Å—Ç—Ä–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è

## –ü–æ–≤–µ–¥–µ–Ω—á–µ—Å–∫–∏–µ –æ—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏

1. **–°–ª—É—á–∞–π–Ω—ã–π –ø–æ—Ä—è–¥–æ–∫ –∏—Ç–µ—Ä–∞—Ü–∏–∏** - —ç–ª–µ–º–µ–Ω—Ç—ã –≤–æ–∑–≤—Ä–∞—â–∞—é—Ç—Å—è –≤ –ø—Ä–æ–∏–∑–≤–æ–ª—å–Ω–æ–º –ø–æ—Ä—è–¥–∫–µ
2. **–ù—É–ª–µ–≤–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ** - –Ω–µ–∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω–∞—è map —Ä–∞–≤–Ω–∞ nil
3. **–ù–µ—Å—Ä–∞–≤–Ω–∏–º–æ—Å—Ç—å** - map –Ω–µ–ª—å–∑—è —Å—Ä–∞–≤–Ω–∏–≤–∞—Ç—å –æ–ø–µ—Ä–∞—Ç–æ—Ä–æ–º ==
4. **–ù–µ–ø–æ—Ç–æ–∫–æ–±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å** - —Ç—Ä–µ–±—É–µ—Ç—Å—è —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è –ø—Ä–∏ –∫–æ–Ω–∫—É—Ä–µ–Ω—Ç–Ω–æ–º –¥–æ—Å—Ç—É–ø–µ

## –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å –æ–ø–µ—Ä–∞—Ü–∏–π

- –í—Å—Ç–∞–≤–∫–∞: O(1) –≤ —Å—Ä–µ–¥–Ω–µ–º —Å–ª—É—á–∞–µ
- –ü–æ–∏—Å–∫: O(1) –≤ —Å—Ä–µ–¥–Ω–µ–º —Å–ª—É—á–∞–µ  
- –£–¥–∞–ª–µ–Ω–∏–µ: O(1) –≤ —Å—Ä–µ–¥–Ω–µ–º —Å–ª—É—á–∞–µ
- –ò—Ç–µ—Ä–∞—Ü–∏—è: O(n) –ø–æ –≤—Å–µ–º —ç–ª–µ–º–µ–Ω—Ç–∞–º

## –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –ø–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é

- **–ü—Ä–µ–¥–≤–∞—Ä–∏—Ç–µ–ª—å–Ω–æ–µ –≤—ã–¥–µ–ª–µ–Ω–∏–µ**: –°–æ–∑–¥–∞–≤–∞–π—Ç–µ map —Å –Ω—É–∂–Ω–æ–π –µ–º–∫–æ—Å—Ç—å—é —á–µ—Ä–µ–∑ make(map[K]V, capacity)
- **–ò–∑–±–µ–≥–∞–π—Ç–µ —á–∞—Å—Ç–æ–≥–æ —Ä–æ—Å—Ç–∞**: –ö–∞–∂–¥—ã–π —Ä–æ—Å—Ç —Ç—Ä–µ–±—É–µ—Ç –ø–µ—Ä–µ—Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è –ø–∞–º—è—Ç–∏ –∏ –ø–µ—Ä–µ—Ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏—è
- **–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ —É–∫–∞–∑–∞—Ç–µ–ª–∏ –¥–ª—è –±–æ–ª—å—à–∏—Ö –∑–Ω–∞—á–µ–Ω–∏–π**: –≠—Ç–æ —É–º–µ–Ω—å—à–∞–µ—Ç –∑–∞—Ç—Ä–∞—Ç—ã –Ω–∞ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ

Map –≤ Go –ø—Ä–µ–¥—Å—Ç–∞–≤–ª—è–µ—Ç —Å–æ–±–æ–π —Ç—â–∞—Ç–µ–ª—å–Ω–æ –æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—É—é —Ö—ç—à-—Ç–∞–±–ª–∏—Ü—É, –∫–æ—Ç–æ—Ä–∞—è –æ–±–µ—Å–ø–µ—á–∏–≤–∞–µ—Ç –≤—ã—Å–æ–∫—É—é –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å –¥–ª—è –±–æ–ª—å—à–∏–Ω—Å—Ç–≤–∞ —Å—Ü–µ–Ω–∞—Ä–∏–µ–≤ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è, —Å–æ—á–µ—Ç–∞—è —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –ø–∞–º—è—Ç–∏ —Å –±—ã—Å—Ç—Ä—ã–º –¥–æ—Å—Ç—É–ø–æ–º –∫ –¥–∞–Ω–Ω—ã–º.
# 5 - –≠–≤–∞–∫—É–∞—Ü–∏—è –≤ map Go

**–≠–≤–∞–∫—É–∞—Ü–∏—è** ‚Äî —ç—Ç–æ –ø—Ä–æ—Ü–µ—Å—Å –ø–æ—Å—Ç–µ–ø–µ–Ω–Ω–æ–≥–æ –ø–µ—Ä–µ–º–µ—â–µ–Ω–∏—è —ç–ª–µ–º–µ–Ω—Ç–æ–≤ –∏–∑ —Å—Ç–∞—Ä—ã—Ö –±–∞–∫–µ—Ç–æ–≤ –≤ –Ω–æ–≤—ã–µ –ø—Ä–∏ —É–≤–µ–ª–∏—á–µ–Ω–∏–∏ —Ä–∞–∑–º–µ—Ä–∞ map.

## –ö–æ–≥–¥–∞ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç —ç–≤–∞–∫—É–∞—Ü–∏—è

–≠–≤–∞–∫—É–∞—Ü–∏—è –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è –ø—Ä–∏ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏–∏ –ø–æ—Ä–æ–≥–∞ –Ω–∞–≥—Ä—É–∑–∫–∏:
- **–ö–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç –Ω–∞–≥—Ä—É–∑–∫–∏** = 6.5 —ç–ª–µ–º–µ–Ω—Ç–æ–≤ –Ω–∞ –±–∞–∫–µ—Ç –≤ —Å—Ä–µ–¥–Ω–µ–º
- **–§–æ—Ä–º—É–ª–∞**: `count > 6.5 * 2^B`

## –ü—Ä–æ—Ü–µ—Å—Å —ç–≤–∞–∫—É–∞—Ü–∏–∏

### 1. –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ –Ω–æ–≤–æ–π —Ç–∞–±–ª–∏—Ü—ã
```go
// –°–æ–∑–¥–∞–µ–º –Ω–æ–≤—ã–µ –±–∞–∫–µ—Ç—ã –≤ 2 —Ä–∞–∑–∞ –±–æ–ª—å—à–µ
newBuckets = makeBuckets(1 << (h.B + 1))
h.oldbuckets = h.buckets  // –°–æ—Ö—Ä–∞–Ω—è–µ–º —Å—Ç–∞—Ä—ã–µ –±–∞–∫–µ—Ç—ã
h.buckets = newBuckets    // –ü–µ—Ä–µ–∫–ª—é—á–∞–µ–º –Ω–∞ –Ω–æ–≤—ã–µ
h.B++                     // –£–≤–µ–ª–∏—á–∏–≤–∞–µ–º –ø–æ–∫–∞–∑–∞—Ç–µ–ª—å —Ä–∞–∑–º–µ—Ä–∞
```

### 2. –ü–æ—Å—Ç–µ–ø–µ–Ω–Ω–æ–µ –ø–µ—Ä–µ–º–µ—â–µ–Ω–∏–µ
–≠–≤–∞–∫—É–∞—Ü–∏—è –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –Ω–µ —Å—Ä–∞–∑—É, –∞ –ø–æ—Å—Ç–µ–ø–µ–Ω–Ω–æ –ø—Ä–∏ –∫–∞–∂–¥–æ–π –æ–ø–µ—Ä–∞—Ü–∏–∏ —Å map:

```go
func mapassign(t *maptype, h *hmap, key unsafe.Pointer) unsafe.Pointer {
    // –ï—Å–ª–∏ map –≤ –ø—Ä–æ—Ü–µ—Å—Å–µ —Ä–æ—Å—Ç–∞, —ç–≤–∞–∫—É–∏—Ä—É–µ–º –æ–¥–∏–Ω –±–∞–∫–µ—Ç
    if h.growing() {
        growWork(t, h, bucket)
    }
    // ... –æ—Å—Ç–∞–ª—å–Ω–∞—è –ª–æ–≥–∏–∫–∞ –≤—Å—Ç–∞–≤–∫–∏
}
```

### 3. –ú–µ—Ö–∞–Ω–∏–∑–º growWork
```go
func growWork(t *maptype, h *hmap, bucket uintptr) {
    // –≠–≤–∞–∫—É–∏—Ä—É–µ–º –±–∞–∫–µ—Ç, —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–∏–π —Ç–µ–∫—É—â–µ–π –æ–ø–µ—Ä–∞—Ü–∏–∏
    evacuate(t, h, bucket&h.oldbucketmask())
    
    // –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ —ç–≤–∞–∫—É–∏—Ä—É–µ–º —Å–ª–µ–¥—É—é—â–∏–π –±–∞–∫–µ—Ç –∏–∑ –æ—á–µ—Ä–µ–¥–∏
    if h.growing() {
        evacuate(t, h, h.nevacuate)
    }
}
```

## –î–µ—Ç–∞–ª–∏ –ø—Ä–æ—Ü–µ—Å—Å–∞ evacuate

### –†–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ —ç–ª–µ–º–µ–Ω—Ç–æ–≤
–ü—Ä–∏ —ç–≤–∞–∫—É–∞—Ü–∏–∏ –∫–∞–∂–¥—ã–π —ç–ª–µ–º–µ–Ω—Ç –º–æ–∂–µ—Ç –ø–æ–ø–∞—Å—Ç—å –≤ –æ–¥–∏–Ω –∏–∑ –¥–≤—É—Ö –Ω–æ–≤—ã—Ö –±–∞–∫–µ—Ç–æ–≤:

```
–°—Ç–∞—Ä—ã–π –±–∞–∫–µ—Ç X –¥–µ–ª–∏—Ç—Å—è –Ω–∞ –¥–≤–∞ –Ω–æ–≤—ã—Ö:
- –ù–æ–≤—ã–π –±–∞–∫–µ—Ç X (—Ç–µ –∂–µ –º–ª–∞–¥—à–∏–µ –±–∏—Ç—ã)
- –ù–æ–≤—ã–π –±–∞–∫–µ—Ç X + oldSize (–¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–π —Å—Ç–∞—Ä—à–∏–π –±–∏—Ç)
```

### –ü—Ä–∏–º–µ—Ä –¥–ª—è B=2 ‚Üí B=3
```
–°—Ç–∞—Ä–∞—è —Ç–∞–±–ª–∏—Ü–∞: 4 –±–∞–∫–µ—Ç–∞ (B=2)
–ù–æ–≤–∞—è —Ç–∞–±–ª–∏—Ü–∞: 8 –±–∞–∫–µ—Ç–æ–≤ (B=3)

–°—Ç–∞—Ä—ã–π –±–∞–∫–µ—Ç 1 (01) –¥–µ–ª–∏—Ç—Å—è –Ω–∞:
- –ù–æ–≤—ã–π –±–∞–∫–µ—Ç 1 (001) - –µ—Å–ª–∏ –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–π –±–∏—Ç = 0
- –ù–æ–≤—ã–π –±–∞–∫–µ—Ç 5 (101) - –µ—Å–ª–∏ –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–π –±–∏—Ç = 1
```

### –ê–ª–≥–æ—Ä–∏—Ç–º –ø–µ—Ä–µ–º–µ—â–µ–Ω–∏—è
```go
func evacuate(t *maptype, h *hmap, oldbucket uintptr) {
    b := (*bmap)(add(h.oldbuckets, oldbucket*uintptr(t.bucketsize)))
    
    // –°–æ–∑–¥–∞–µ–º –¥–≤–∞ —Ü–µ–ª–µ–≤—ã—Ö –±–∞–∫–µ—Ç–∞ –≤ –Ω–æ–≤–æ–π —Ç–∞–±–ª–∏—Ü–µ
    var newBuckets [2]uintptr
    newBuckets[0] = newBucketBase
    newBuckets[1] = newBucketBase + oldBucketCount
    
    // –ü–µ—Ä–µ–º–µ—â–∞–µ–º –∫–∞–∂–¥—ã–π —ç–ª–µ–º–µ–Ω—Ç
    for ; b != nil; b = b.overflow(t) {
        for i := 0; i < bucketCnt; i++ {
            if b.tophash[i] == empty {
                continue
            }
            
            // –û–ø—Ä–µ–¥–µ–ª—è–µ–º –Ω–æ–≤—ã–π –±–∞–∫–µ—Ç –Ω–∞ –æ—Å–Ω–æ–≤–µ –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ–≥–æ –±–∏—Ç–∞ —Ö—ç—à–∞
            hash := keyHash(b.keys[i])
            newBucketIndex := (hash >> h.B) & 1  // 0 –∏–ª–∏ 1
            
            // –ü–µ—Ä–µ–º–µ—â–∞–µ–º —ç–ª–µ–º–µ–Ω—Ç –≤ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–∏–π –Ω–æ–≤—ã–π –±–∞–∫–µ—Ç
            dst := newBuckets[newBucketIndex]
            // ... –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ –∫–ª—é—á–∞ –∏ –∑–Ω–∞—á–µ–Ω–∏—è
        }
    }
    
    // –ü–æ–º–µ—á–∞–µ–º —Å—Ç–∞—Ä—ã–π –±–∞–∫–µ—Ç –∫–∞–∫ —ç–≤–∞–∫—É–∏—Ä–æ–≤–∞–Ω–Ω—ã–π
    h.nevacuate++
}
```

## –û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏

### 1. **–ò–Ω–∫—Ä–µ–º–µ–Ω—Ç–∞–ª—å–Ω–æ—Å—Ç—å**
- –≠–≤–∞–∫—É–∞—Ü–∏—è –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –ø–æ—Å—Ç–µ–ø–µ–Ω–Ω–æ
- –ó–∞ –æ–¥–Ω—É –æ–ø–µ—Ä–∞—Ü–∏—é –ø–µ—Ä–µ–º–µ—â–∞–µ—Ç—Å—è 1-2 –±–∞–∫–µ—Ç–∞
- –ù–µ –±–ª–æ–∫–∏—Ä—É–µ—Ç —Ä–∞–±–æ—Ç—É —Å map –Ω–∞ –¥–ª–∏—Ç–µ–ª—å–Ω–æ–µ –≤—Ä–µ–º—è

### 2. **–°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏**
- –û–ø–µ—Ä–∞—Ü–∏–∏ –ø—Ä–æ–¥–æ–ª–∂–∞—é—Ç —Ä–∞–±–æ—Ç–∞—Ç—å –≤–æ –≤—Ä–µ–º—è —ç–≤–∞–∫—É–∞—Ü–∏–∏
- –ü–æ–∏—Å–∫ –ø—Ä–æ–≤–µ—Ä—è–µ—Ç –æ–±–∞ —Ä–∞—Å–ø–æ–ª–æ–∂–µ–Ω–∏—è (—Å—Ç–∞—Ä–æ–µ –∏ –Ω–æ–≤–æ–µ)
- –ú–∏–Ω–∏–º–∞–ª—å–Ω—ã–µ –Ω–∞–∫–ª–∞–¥–Ω—ã–µ —Ä–∞—Å—Ö–æ–¥—ã

### 3. **–§–∏–Ω–∞–ª–∏–∑–∞—Ü–∏—è —Ä–æ—Å—Ç–∞**
–ö–æ–≥–¥–∞ –≤—Å–µ –±–∞–∫–µ—Ç—ã —ç–≤–∞–∫—É–∏—Ä–æ–≤–∞–Ω—ã:
```go
h.oldbuckets = nil  // –û—Å–≤–æ–±–æ–∂–¥–∞–µ–º —Å—Ç–∞—Ä—É—é –ø–∞–º—è—Ç—å
h.flags &^= sameSizeGrow
```

## –ü—Ä–∏–º–µ—Ä –≤—Ä–µ–º–µ–Ω–Ω–æ–π –ª–∏–Ω–∏–∏ —ç–≤–∞–∫—É–∞—Ü–∏–∏

```
–í—Ä–µ–º—è | –°–æ–±—ã—Ç–∏–µ
------|--------
T0    | Map –¥–æ—Å—Ç–∏–≥–∞–µ—Ç –ø–æ—Ä–æ–≥–∞ —Ä–æ—Å—Ç–∞
T0    | –°–æ–∑–¥–∞—é—Ç—Å—è –Ω–æ–≤—ã–µ –±–∞–∫–µ—Ç—ã, oldbuckets = —Ç–µ–∫—É—â–∏–µ
T1    | –û–ø–µ—Ä–∞—Ü–∏—è #1: —ç–≤–∞–∫—É–∏—Ä—É–µ—Ç –±–∞–∫–µ—Ç 0
T2    | –û–ø–µ—Ä–∞—Ü–∏—è #2: —ç–≤–∞–∫—É–∏—Ä—É–µ—Ç –±–∞–∫–µ—Ç 1
T3    | –û–ø–µ—Ä–∞—Ü–∏—è #3: —ç–≤–∞–∫—É–∏—Ä—É–µ—Ç –±–∞–∫–µ—Ç 2
...   | ...
Tn    | –í—Å–µ –±–∞–∫–µ—Ç—ã —ç–≤–∞–∫—É–∏—Ä–æ–≤–∞–Ω—ã, oldbuckets = nil
```

## –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞ –ø–æ–¥—Ö–æ–¥–∞

1. **–û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ —Ä–µ–∑–∫–∏—Ö –ø–∞—É–∑** - –Ω–µ—Ç –µ–¥–∏–Ω–æ–≥–æ –º–æ–º–µ–Ω—Ç–∞ –±–ª–æ–∫–∏—Ä–æ–≤–∫–∏
2. **–†–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –∑–∞—Ç—Ä–∞—Ç** - —Å—Ç–æ–∏–º–æ—Å—Ç—å —Ä–æ—Å—Ç–∞ —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∞ –ø–æ –º–Ω–æ–≥–∏–º –æ–ø–µ—Ä–∞—Ü–∏—è–º
3. **–ü—Ä–æ–¥–æ–ª–∂–∞—é—â–∞—è—Å—è —Ä–∞–±–æ—Ç–∞** - map –æ—Å—Ç–∞–µ—Ç—Å—è –¥–æ—Å—Ç—É–ø–Ω–æ–π –≤–æ –≤—Ä–µ–º—è —Ä–æ—Å—Ç–∞

–≠–≤–∞–∫—É–∞—Ü–∏—è –¥–µ–ª–∞–µ—Ç —Ä–æ—Å—Ç map –≤ Go —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω—ã–º –∏ –Ω–µ–∑–∞–º–µ—Ç–Ω—ã–º –¥–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è, –æ–±–µ—Å–ø–µ—á–∏–≤–∞—è —Å—Ç–∞–±–∏–ª—å–Ω—É—é –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å –¥–∞–∂–µ –ø—Ä–∏ –∞–∫—Ç–∏–≤–Ω–æ–º –∏–∑–º–µ–Ω–µ–Ω–∏–∏ —Ä–∞–∑–º–µ—Ä–∞.
# 6 - –ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å—ã/–ø—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

## –í–Ω—É—Ç—Ä–µ–Ω–Ω–µ–µ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–æ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–æ–≤

### –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞

–í Go –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω –¥–≤—É–º—è –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞–º–∏:

```go
// –í–Ω—É—Ç—Ä–µ–Ω–Ω–µ–µ –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏–µ (—É–ø—Ä–æ—â–µ–Ω–Ω–æ)
type iface struct {
    tab  *itab          // —Ç–∞–±–ª–∏—Ü–∞ –º–µ—Ç–æ–¥–æ–≤ –∏ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ —Ç–∏–ø–µ
    data unsafe.Pointer // —É–∫–∞–∑–∞—Ç–µ–ª—å –Ω–∞ –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ
}

type itab struct {
    inter *interfacetype // –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–µ
    _type *_type         // –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–º —Ç–∏–ø–µ
    hash  uint32         // –∫–æ–ø–∏—è —Ö—ç—à–∞ —Ç–∏–ø–∞
    _     [4]byte
    fun   [1]uintptr     // –º–∞—Å—Å–∏–≤ –º–µ—Ç–æ–¥–æ–≤ (–≥–∏–±–∫–∏–π)
}
```

### –ü—É—Å—Ç–æ–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å
```go
type eface struct {
    _type *_type         // –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ —Ç–∏–ø–µ
    data  unsafe.Pointer // —É–∫–∞–∑–∞—Ç–µ–ª—å –Ω–∞ –¥–∞–Ω–Ω—ã–µ
}
```

## –ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–æ–≤

### 1. –ë–∞–∑–æ–≤—ã–π –ø—Ä–∏–º–µ—Ä –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞

```go
package main

import (
    "fmt"
    "math"
)

// –û–ø—Ä–µ–¥–µ–ª—è–µ–º –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å
type Shape interface {
    Area() float64
    Perimeter() float64
}

// –†–µ–∞–ª–∏–∑—É–µ–º –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –¥–ª—è —Ä–∞–∑–Ω—ã—Ö —Ç–∏–ø–æ–≤
type Circle struct {
    Radius float64
}

func (c Circle) Area() float64 {
    return math.Pi * c.Radius * c.Radius
}

func (c Circle) Perimeter() float64 {
    return 2 * math.Pi * c.Radius
}

type Rectangle struct {
    Width, Height float64
}

func (r Rectangle) Area() float64 {
    return r.Width * r.Height
}

func (r Rectangle) Perimeter() float64 {
    return 2 * (r.Width + r.Height)
}

// –§—É–Ω–∫—Ü–∏—è, –ø—Ä–∏–Ω–∏–º–∞—é—â–∞—è –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å
func PrintShapeInfo(s Shape) {
    fmt.Printf("Area: %.2f, Perimeter: %.2f\n", s.Area(), s.Perimeter())
}

func main() {
    circle := Circle{Radius: 5}
    rectangle := Rectangle{Width: 10, Height: 5}
    
    PrintShapeInfo(circle)     // Area: 78.54, Perimeter: 31.42
    PrintShapeInfo(rectangle)  // Area: 50.00, Perimeter: 30.00
    
    // –°–ª–∞–π—Å –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–æ–≤
    shapes := []Shape{circle, rectangle}
    for _, shape := range shapes {
        PrintShapeInfo(shape)
    }
}
```

### 2. –ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å—ã –≤ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–æ–π –±–∏–±–ª–∏–æ—Ç–µ–∫–µ

```go
package main

import (
    "fmt"
    "io"
    "os"
    "strings"
)

// –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã—Ö –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–æ–≤
func processReader(r io.Reader) {
    data := make([]byte, 100)
    n, err := r.Read(data)
    if err != nil && err != io.EOF {
        panic(err)
    }
    fmt.Printf("Read %d bytes: %s\n", n, string(data[:n]))
}

func main() {
    // –†–∞–∑–Ω—ã–µ —Ç–∏–ø—ã, —É–¥–æ–≤–ª–µ—Ç–≤–æ—Ä—è—é—â–∏–µ io.Reader
    stringReader := strings.NewReader("Hello from string reader")
    file, _ := os.Open("example.txt") // –ø—Ä–µ–¥–ø–æ–ª–æ–∂–∏–º, —á—Ç–æ —Ñ–∞–π–ª —Å—É—â–µ—Å—Ç–≤—É–µ—Ç
    defer file.Close()
    
    processReader(stringReader)
    processReader(file)
    
    // –¢–∞–∫–∂–µ –º–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å bytes.Buffer, os.Stdin –∏ –¥—Ä.
}
```

### 3. –ö–æ–º–ø–æ–∑–∏—Ü–∏—è –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–æ–≤

```go
package main

import "fmt"

// –ë–∞–∑–æ–≤—ã–µ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å—ã
type Reader interface {
    Read() string
}

type Writer interface {
    Write(string)
}

// –ö–æ–º–ø–æ–∑–∏—Ç–Ω—ã–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å
type ReadWriter interface {
    Reader
    Writer
}

// –¢–∏–ø, —Ä–µ–∞–ª–∏–∑—É—é—â–∏–π –∫–æ–º–ø–æ–∑–∏—Ç–Ω—ã–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å
type Console struct {
    buffer string
}

func (c *Console) Read() string {
    return c.buffer
}

func (c *Console) Write(s string) {
    c.buffer = s
    fmt.Println("Written to console:", s)
}

func Process(rw ReadWriter) {
    rw.Write("Hello World")
    fmt.Println("Read back:", rw.Read())
}

func main() {
    console := &Console{}
    Process(console)
}
```

### 4. Type assertions –∏ type switches

```go
package main

import "fmt"

func describe(i interface{}) {
    // Type switch
    switch v := i.(type) {
    case int:
        fmt.Printf("Integer: %d\n", v)
    case string:
        fmt.Printf("String: %s\n", v)
    case bool:
        fmt.Printf("Boolean: %t\n", v)
    default:
        fmt.Printf("Unknown type: %T\n", v)
    }
}

func main() {
    var i interface{}
    
    i = 42
    describe(i)
    
    // Type assertion
    if value, ok := i.(int); ok {
        fmt.Printf("Successfully asserted as int: %d\n", value)
    }
    
    i = "hello"
    describe(i)
    
    i = true
    describe(i)
}
```

### 5. –ü—Ä–∞–∫—Ç–∏—á–µ—Å–∫–∏–π –ø—Ä–∏–º–µ—Ä: –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ

```go
package main

import (
    "fmt"
    "time"
)

// Cache –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å
type Cache interface {
    Get(key string) (interface{}, bool)
    Set(key string, value interface{})
    Delete(key string)
}

// InMemoryCache —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è
type InMemoryCache struct {
    data map[string]interface{}
}

func NewInMemoryCache() *InMemoryCache {
    return &InMemoryCache{
        data: make(map[string]interface{}),
    }
}

func (c *InMemoryCache) Get(key string) (interface{}, bool) {
    value, exists := c.data[key]
    return value, exists
}

func (c *InMemoryCache) Set(key string, value interface{}) {
    c.data[key] = value
}

func (c *InMemoryCache) Delete(key string) {
    delete(c.data, key)
}

// TTLCache —Å –≤—Ä–µ–º–µ–Ω–µ–º –∂–∏–∑–Ω–∏
type TTLCache struct {
    InMemoryCache
    ttl    time.Duration
    timers map[string]*time.Timer
}

func NewTTLCache(ttl time.Duration) *TTLCache {
    return &TTLCache{
        InMemoryCache: *NewInMemoryCache(),
        ttl:           ttl,
        timers:        make(map[string]*time.Timer),
    }
}

func (c *TTLCache) Set(key string, value interface{}) {
    c.InMemoryCache.Set(key, value)
    
    // –£–¥–∞–ª—è–µ–º —Å—Ç–∞—Ä—ã–π —Ç–∞–π–º–µ—Ä –µ—Å–ª–∏ –µ—Å—Ç—å
    if timer, exists := c.timers[key]; exists {
        timer.Stop()
    }
    
    // –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –Ω–æ–≤—ã–π —Ç–∞–π–º–µ—Ä
    c.timers[key] = time.AfterFunc(c.ttl, func() {
        c.Delete(key)
    })
}

func (c *TTLCache) Delete(key string) {
    c.InMemoryCache.Delete(key)
    if timer, exists := c.timers[key]; exists {
        timer.Stop()
        delete(c.timers, key)
    }
}

// –§—É–Ω–∫—Ü–∏—è —Ä–∞–±–æ—Ç–∞—é—â–∞—è —Å –ª—é–±—ã–º –∫—ç—à–µ–º
func UseCache(cache Cache) {
    cache.Set("user:1", "John Doe")
    
    if value, exists := cache.Get("user:1"); exists {
        fmt.Println("Found:", value)
    }
    
    cache.Delete("user:1")
}

func main() {
    memoryCache := NewInMemoryCache()
    ttlCache := NewTTLCache(5 * time.Minute)
    
    UseCache(memoryCache)
    UseCache(ttlCache)
}
```

### 6. Mock-—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Å –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞–º–∏

```go
package main

import "fmt"

// Database –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –¥–ª—è –∞–±—Å—Ç—Ä–∞–∫—Ü–∏–∏ —Ä–∞–±–æ—Ç—ã —Å –ë–î
type Database interface {
    GetUser(id int) (string, error)
    SaveUser(id int, name string) error
}

// RealDatabase - —Ä–µ–∞–ª—å–Ω–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è
type RealDatabase struct{}

func (db *RealDatabase) GetUser(id int) (string, error) {
    // –†–µ–∞–ª—å–Ω–∞—è –ª–æ–≥–∏–∫–∞ —Ä–∞–±–æ—Ç—ã —Å –ë–î
    return "Real User", nil
}

func (db *RealDatabase) SaveUser(id int, name string) error {
    // –†–µ–∞–ª—å–Ω–∞—è –ª–æ–≥–∏–∫–∞ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è
    return nil
}

// MockDatabase –¥–ª—è —Ç–µ—Å—Ç–æ–≤
type MockDatabase struct {
    users map[int]string
}

func NewMockDatabase() *MockDatabase {
    return &MockDatabase{
        users: make(map[int]string),
    }
}

func (db *MockDatabase) GetUser(id int) (string, error) {
    if user, exists := db.users[id]; exists {
        return user, nil
    }
    return "", fmt.Errorf("user not found")
}

func (db *MockDatabase) SaveUser(id int, name string) error {
    db.users[id] = name
    return nil
}

// UserService –∏—Å–ø–æ–ª—å–∑—É—é—â–∏–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å
type UserService struct {
    db Database
}

func NewUserService(db Database) *UserService {
    return &UserService{db: db}
}

func (s *UserService) CreateUser(id int, name string) error {
    return s.db.SaveUser(id, name)
}

func (s *UserService) GetUserName(id int) (string, error) {
    return s.db.GetUser(id)
}

func main() {
    // –í production –∏—Å–ø–æ–ª—å–∑—É–µ–º —Ä–µ–∞–ª—å–Ω—É—é –ë–î
    realDB := &RealDatabase{}
    userService := NewUserService(realDB)
    
    // –í —Ç–µ—Å—Ç–∞—Ö –∏—Å–ø–æ–ª—å–∑—É–µ–º mock
    mockDB := NewMockDatabase()
    testService := NewUserService(mockDB)
    
    _ = userService
    _ = testService
}
```

## –ö–ª—é—á–µ–≤—ã–µ –ø—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–æ–≤

1. **–ü–æ–ª–∏–º–æ—Ä—Ñ–∏–∑–º**: –†–∞–∑–Ω—ã–µ —Ç–∏–ø—ã –º–æ–≥—É—Ç –∏–º–µ—Ç—å –æ–¥–∏–Ω–∞–∫–æ–≤–æ–µ –ø–æ–≤–µ–¥–µ–Ω–∏–µ
2. **–¢–µ—Å—Ç–∏—Ä—É–µ–º–æ—Å—Ç—å**: –õ–µ–≥–∫–æ —Å–æ–∑–¥–∞–≤–∞—Ç—å mock-–æ–±—ä–µ–∫—Ç—ã –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è
3. **–ì–∏–±–∫–æ—Å—Ç—å**: –ú–æ–∂–Ω–æ –º–µ–Ω—è—Ç—å —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ –±–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏—è –∫–æ–¥–∞ –∫–ª–∏–µ–Ω—Ç–∞
4. **–î–µ–∫–æ–º–ø–æ–∑–∏—Ü–∏—è**: –†–∞–∑–¥–µ–ª–µ–Ω–∏–µ –∞–±—Å—Ç—Ä–∞–∫—Ü–∏–∏ –∏ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏

## –õ—É—á—à–∏–µ –ø—Ä–∞–∫—Ç–∏–∫–∏

- **–ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å—ã –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å –º–∞–ª–µ–Ω—å–∫–∏–º–∏** (–ø—Ä–∏–Ω—Ü–∏–ø —Ä–∞–∑–¥–µ–ª–µ–Ω–∏—è –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–æ–≤)
- **–ü—Ä–∏–Ω–∏–º–∞–π—Ç–µ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å—ã, –≤–æ–∑–≤—Ä–∞—â–∞–π—Ç–µ —Å—Ç—Ä—É–∫—Ç—É—Ä—ã**
- **–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –∫–æ–º–ø–æ–∑–∏—Ü–∏—é –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è —Å–ª–æ–∂–Ω—ã—Ö –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–æ–≤**
- **–ò–∑–±–µ–≥–∞–π—Ç–µ –ø—É—Å—Ç—ã—Ö –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–æ–≤, –∫–æ–≥–¥–∞ –º–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Ç–∏–ø–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ**

–ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å—ã –≤ Go –æ–±–µ—Å–ø–µ—á–∏–≤–∞—é—Ç –º–æ—â–Ω—ã–π –º–µ—Ö–∞–Ω–∏–∑–º –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –≥–∏–±–∫–æ–≥–æ –∏ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º–æ–≥–æ –∫–æ–¥–∞, –ø–æ–∑–≤–æ–ª—è—è —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ —Ä–∞–∑–¥–µ–ª—è—Ç—å –∞–±—Å—Ç—Ä–∞–∫—Ü–∏–∏ –∏ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏.
# 7 - –ì–æ—Ä—É—Ç–∏–Ω—ã
# 8 - i/o bound operations

## –ß—Ç–æ —Ç–∞–∫–æ–µ I/O Bound Operations?

**I/O Bound Operations** - —ç—Ç–æ –æ–ø–µ—Ä–∞—Ü–∏–∏, –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å –∫–æ—Ç–æ—Ä—ã—Ö –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∞ —Å–∫–æ—Ä–æ—Å—Ç—å—é –æ–ø–µ—Ä–∞—Ü–∏–π –≤–≤–æ–¥–∞-–≤—ã–≤–æ–¥–∞, –∞ –Ω–µ –≤—ã—á–∏—Å–ª–∏—Ç–µ–ª—å–Ω–æ–π –º–æ—â–Ω–æ—Å—Ç—å—é CPU. –¢–∞–∫–∏–µ –æ–ø–µ—Ä–∞—Ü–∏–∏ –ø—Ä–æ–≤–æ–¥—è—Ç –±–æ–ª—å—à—É—é —á–∞—Å—Ç—å –≤—Ä–µ–º–µ–Ω–∏ –≤ –æ–∂–∏–¥–∞–Ω–∏–∏ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è I/O –æ–ø–µ—Ä–∞—Ü–∏–π.

### –ü—Ä–∏–º–µ—Ä—ã I/O Bound –æ–ø–µ—Ä–∞—Ü–∏–π:
- –°–µ—Ç–µ–≤—ã–µ –∑–∞–ø—Ä–æ—Å—ã (HTTP, gRPC, –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö)
- –ß—Ç–µ–Ω–∏–µ/–∑–∞–ø–∏—Å—å —Ñ–∞–π–ª–æ–≤ –Ω–∞ –¥–∏—Å–∫
- –û–ø–µ—Ä–∞—Ü–∏–∏ —Å –±–∞–∑–∞–º–∏ –¥–∞–Ω–Ω—ã—Ö
- –í–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏–µ —Å –≤–Ω–µ—à–Ω–∏–º–∏ API
- Web scraping

## –û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏ I/O Bound –æ–ø–µ—Ä–∞—Ü–∏–π –≤ Go

### –ë–ª–æ–∫–∏—Ä—É—é—â–∏–µ vs –ù–µ–±–ª–æ–∫–∏—Ä—É—é—â–∏–µ –æ–ø–µ—Ä–∞—Ü–∏–∏

```go
package main

import (
    "fmt"
    "io"
    "net/http"
    "time"
)

// –ë–ª–æ–∫–∏—Ä—É—é—â–∏–π I/O (–ø–ª–æ—Ö–æ–π –ø–æ–¥—Ö–æ–¥)
func blockingIO() {
    start := time.Now()
    
    // –ü–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω—ã–µ HTTP –∑–∞–ø—Ä–æ—Å—ã
    response1, _ := http.Get("https://api.example.com/data1")
    defer response1.Body.Close()
    
    response2, _ := http.Get("https://api.example.com/data2") 
    defer response2.Body.Close()
    
    response3, _ := http.Get("https://api.example.com/data3")
    defer response3.Body.Close()
    
    fmt.Printf("Blocking IO took: %v\n", time.Since(start))
}

// –ù–µ–±–ª–æ–∫–∏—Ä—É—é—â–∏–π I/O —Å –≥–æ—Ä—É—Ç–∏–Ω–∞–º–∏ (—Ö–æ—Ä–æ—à–∏–π –ø–æ–¥—Ö–æ–¥)
func nonBlockingIO() {
    start := time.Now()
    var wg sync.WaitGroup
    
    urls := []string{
        "https://api.example.com/data1",
        "https://api.example.com/data2",
        "https://api.example.com/data3",
    }
    
    for _, url := range urls {
        wg.Add(1)
        go func(u string) {
            defer wg.Done()
            response, _ := http.Get(u)
            if response != nil {
                response.Body.Close()
            }
        }(url)
    }
    
    wg.Wait()
    fmt.Printf("Non-blocking IO took: %v\n", time.Since(start))
}
```

## –ü–∞—Ç—Ç–µ—Ä–Ω—ã –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å I/O Bound –æ–ø–µ—Ä–∞—Ü–∏—è–º–∏

### 1. Worker Pool –¥–ª—è I/O –æ–ø–µ—Ä–∞—Ü–∏–π

```go
package main

import (
    "fmt"
    "io"
    "net/http"
    "sync"
)

type Job struct {
    URL string
}

type Result struct {
    URL  string
    Size int64
    Err  error
}

func worker(id int, jobs <-chan Job, results chan<- Result, wg *sync.WaitGroup) {
    defer wg.Done()
    
    client := &http.Client{
        Timeout: 10 * time.Second,
    }
    
    for job := range jobs {
        fmt.Printf("Worker %d processing %s\n", id, job.URL)
        
        resp, err := client.Get(job.URL)
        if err != nil {
            results <- Result{URL: job.URL, Err: err}
            continue
        }
        
        size, err := io.Copy(io.Discard, resp.Body)
        resp.Body.Close()
        
        results <- Result{
            URL:  job.URL,
            Size: size,
            Err:  err,
        }
    }
}

func main() {
    urls := []string{
        "https://httpbin.org/json",
        "https://httpbin.org/xml", 
        "https://httpbin.org/html",
        "https://httpbin.org/bytes/1024",
        "https://httpbin.org/bytes/2048",
    }
    
    const numWorkers = 3
    jobs := make(chan Job, len(urls))
    results := make(chan Result, len(urls))
    
    var wg sync.WaitGroup
    
    // –ó–∞–ø—É—Å–∫–∞–µ–º workers
    for i := 1; i <= numWorkers; i++ {
        wg.Add(1)
        go worker(i, jobs, results, &wg)
    }
    
    // –û—Ç–ø—Ä–∞–≤–ª—è–µ–º jobs
    for _, url := range urls {
        jobs <- Job{URL: url}
    }
    close(jobs)
    
    // –ó–∞–∫—Ä—ã–≤–∞–µ–º results –ø–æ—Å–ª–µ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è –≤—Å–µ—Ö workers
    go func() {
        wg.Wait()
        close(results)
    }()
    
    // –°–æ–±–∏—Ä–∞–µ–º —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã
    for result := range results {
        if result.Err != nil {
            fmt.Printf("Error fetching %s: %v\n", result.URL, result.Err)
        } else {
            fmt.Printf("Fetched %s: %d bytes\n", result.URL, result.Size)
        }
    }
}
```

### 2. –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω—ã—Ö I/O –æ–ø–µ—Ä–∞—Ü–∏–π

```go
package main

import (
    "context"
    "fmt"
    "golang.org/x/sync/semaphore"
    "net/http"
    "sync"
    "time"
)

func rateLimitedIO() {
    var (
        sem    = semaphore.NewWeighted(5) // –ú–∞–∫—Å–∏–º—É–º 5 –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω—ã—Ö –∑–∞–ø—Ä–æ—Å–æ–≤
        client = &http.Client{Timeout: 10 * time.Second}
        wg     sync.WaitGroup
        mu     sync.Mutex
        results []string
    )
    
    urls := make([]string, 20)
    for i := range urls {
        urls[i] = fmt.Sprintf("https://httpbin.org/delay/%d", i%3+1)
    }
    
    ctx := context.Background()
    
    for _, url := range urls {
        wg.Add(1)
        go func(u string) {
            defer wg.Done()
            
            // Acquire semaphore
            if err := sem.Acquire(ctx, 1); err != nil {
                fmt.Printf("Failed to acquire semaphore: %v\n", err)
                return
            }
            defer sem.Release(1)
            
            // –í—ã–ø–æ–ª–Ω—è–µ–º HTTP –∑–∞–ø—Ä–æ—Å
            resp, err := client.Get(u)
            if err != nil {
                fmt.Printf("Error fetching %s: %v\n", u, err)
                return
            }
            defer resp.Body.Close()
            
            mu.Lock()
            results = append(results, fmt.Sprintf("Completed: %s", u))
            mu.Unlock()
        }(url)
    }
    
    wg.Wait()
    fmt.Printf("Completed %d requests\n", len(results))
}
```

### 3. –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ context –¥–ª—è –æ—Ç–º–µ–Ω—ã I/O –æ–ø–µ—Ä–∞—Ü–∏–π

```go
package main

import (
    "context"
    "fmt"
    "io"
    "net/http"
    "time"
)

func fetchWithTimeout(url string, timeout time.Duration) (string, error) {
    ctx, cancel := context.WithTimeout(context.Background(), timeout)
    defer cancel()
    
    req, err := http.NewRequestWithContext(ctx, "GET", url, nil)
    if err != nil {
        return "", err
    }
    
    client := http.DefaultClient
    resp, err := client.Do(req)
    if err != nil {
        return "", err
    }
    defer resp.Body.Close()
    
    body, err := io.ReadAll(resp.Body)
    if err != nil {
        return "", err
    }
    
    return string(body), nil
}

func main() {
    url := "https://httpbin.org/delay/3" // –°–µ—Ä–≤–µ—Ä –∂–¥–µ—Ç 3 —Å–µ–∫—É–Ω–¥—ã
    
    // –ü—ã—Ç–∞–µ–º—Å—è –ø–æ–ª—É—á–∏—Ç—å –¥–∞–Ω–Ω—ã–µ —Å —Ç–∞–π–º–∞—É—Ç–æ–º 2 —Å–µ–∫—É–Ω–¥—ã
    start := time.Now()
    data, err := fetchWithTimeout(url, 2*time.Second)
    
    if err != nil {
        fmt.Printf("Request failed after %v: %v\n", time.Since(start), err)
    } else {
        fmt.Printf("Request succeeded: %d bytes\n", len(data))
    }
}
```

### 4. Pipeline –¥–ª—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ I/O –¥–∞–Ω–Ω—ã—Ö

```go
package main

import (
    "fmt"
    "io"
    "net/http"
    "strings"
    "sync"
)

func processURLs(urls []string) {
    // Stage 1: –ó–∞–≥—Ä—É–∑–∫–∞
    download := func(urls []string) <-chan string {
        out := make(chan string)
        go func() {
            defer close(out)
            client := http.Client{Timeout: 10 * time.Second}
            for _, url := range urls {
                resp, err := client.Get(url)
                if err != nil {
                    continue
                }
                body, _ := io.ReadAll(resp.Body)
                resp.Body.Close()
                out <- string(body)
            }
        }()
        return out
    }
    
    // Stage 2: –û–±—Ä–∞–±–æ—Ç–∫–∞
    process := func(in <-chan string) <-chan int {
        out := make(chan int)
        go func() {
            defer close(out)
            for data := range in {
                // –ü—Ä–∏–º–µ—Ä –æ–±—Ä–∞–±–æ—Ç–∫–∏: –ø–æ–¥—Å—á–µ—Ç —Å–ª–æ–≤
                words := len(strings.Fields(data))
                out <- words
            }
        }()
        return out
    }
    
    // Stage 3: –ê–≥—Ä–µ–≥–∞—Ü–∏—è
    aggregate := func(in <-chan int) int {
        total := 0
        for count := range in {
            total += count
        }
        return total
    }
    
    // –ó–∞–ø—É—Å–∫–∞–µ–º pipeline
    downloaded := download(urls)
    processed := process(downloaded)
    result := aggregate(processed)
    
    fmt.Printf("Total words: %d\n", result)
}
```

## –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ –¥–ª—è I/O Bound –æ–ø–µ—Ä–∞—Ü–∏–π

### 1. Connection Pooling

```go
package main

import (
    "database/sql"
    "fmt"
    _ "github.com/lib/pq"
    "time"
)

func setupConnectionPool() *sql.DB {
    db, err := sql.Open("postgres", "user=postgres dbname=test sslmode=disable")
    if err != nil {
        panic(err)
    }
    
    // –ù–∞—Å—Ç—Ä–æ–π–∫–∞ connection pool
    db.SetMaxOpenConns(25)       // –ú–∞–∫—Å–∏–º—É–º –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω—ã—Ö —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–π
    db.SetMaxIdleConns(25)       // –ú–∞–∫—Å–∏–º—É–º idle —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–π  
    db.SetConnMaxLifetime(5 * time.Minute) // –í—Ä–µ–º—è –∂–∏–∑–Ω–∏ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è
    
    return db
}

func concurrentDBQueries(db *sql.DB) {
    var wg sync.WaitGroup
    queries := []string{
        "SELECT * FROM users WHERE active = true",
        "SELECT COUNT(*) FROM orders",
        "SELECT * FROM products WHERE price > 100",
    }
    
    for i, query := range queries {
        wg.Add(1)
        go func(q string, id int) {
            defer wg.Done()
            
            start := time.Now()
            rows, err := db.Query(q)
            if err != nil {
                fmt.Printf("Query %d failed: %v\n", id, err)
                return
            }
            defer rows.Close()
            
            // –û–±—Ä–∞–±–æ—Ç–∫–∞ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤...
            fmt.Printf("Query %d completed in %v\n", id, time.Since(start))
        }(query, i)
    }
    
    wg.Wait()
}
```

### 2. –ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ I/O –æ–ø–µ—Ä–∞—Ü–∏–π

```go
package main

import (
    "sync"
    "time"
)

type Cache struct {
    mu    sync.RWMutex
    data  map[string]cacheEntry
}

type cacheEntry struct {
    value      interface{}
    expiration time.Time
}

func NewCache(cleanupInterval time.Duration) *Cache {
    cache := &Cache{
        data: make(map[string]cacheEntry),
    }
    
    // –ó–∞–ø—É—Å–∫–∞–µ–º –≥–æ—Ä—É—Ç–∏–Ω—É –¥–ª—è –æ—á–∏—Å—Ç–∫–∏ –ø—Ä–æ—Å—Ä–æ—á–µ–Ω–Ω—ã—Ö –∑–∞–ø–∏—Å–µ–π
    go cache.cleanup(cleanupInterval)
    return cache
}

func (c *Cache) Set(key string, value interface{}, ttl time.Duration) {
    c.mu.Lock()
    defer c.mu.Unlock()
    
    c.data[key] = cacheEntry{
        value:      value,
        expiration: time.Now().Add(ttl),
    }
}

func (c *Cache) Get(key string) (interface{}, bool) {
    c.mu.RLock()
    defer c.mu.RUnlock()
    
    entry, exists := c.data[key]
    if !exists || time.Now().After(entry.expiration) {
        return nil, false
    }
    
    return entry.value, true
}

func (c *Cache) cleanup(interval time.Duration) {
    ticker := time.NewTicker(interval)
    defer ticker.Stop()
    
    for range ticker.C {
        c.mu.Lock()
        now := time.Now()
        for key, entry := range c.data {
            if now.After(entry.expiration) {
                delete(c.data, key)
            }
        }
        c.mu.Unlock()
    }
}
```

### 3. Bulk Operations –¥–ª—è —É–º–µ–Ω—å—à–µ–Ω–∏—è I/O

```go
package main

import (
    "fmt"
    "time"
)

// –í–º–µ—Å—Ç–æ –º–Ω–æ–∂–µ—Å—Ç–≤–∞ –º–∞–ª–µ–Ω—å–∫–∏—Ö –∑–∞–ø—Ä–æ—Å–æ–≤ - –æ–¥–∏–Ω –±–æ–ª—å—à–æ–π
func bulkDatabaseOperations(records []Record) error {
    // –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ batch insert
    const batchSize = 100
    var batches [][]Record
    
    for batchSize < len(records) {
        records, batches = records[batchSize:], append(batches, records[0:batchSize:batchSize])
    }
    batches = append(batches, records)
    
    // –í—ã–ø–æ–ª–Ω–µ–Ω–∏–µ batch –æ–ø–µ—Ä–∞—Ü–∏–π
    for i, batch := range batches {
        if err := insertBatch(batch); err != nil {
            return fmt.Errorf("batch %d failed: %w", i, err)
        }
    }
    
    return nil
}

func insertBatch(records []Record) error {
    // –†–µ–∞–ª–∏–∑–∞—Ü–∏—è batch insert
    time.Sleep(10 * time.Millisecond) // –ò–º–∏—Ç–∞—Ü–∏—è I/O
    return nil
}

type Record struct {
    ID   int
    Data string
}
```

## –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∏ –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞

### –ü—Ä–æ—Ñ–∏–ª–∏—Ä–æ–≤–∞–Ω–∏–µ I/O –æ–ø–µ—Ä–∞—Ü–∏–π

```go
package main

import (
    "fmt"
    "net/http"
    _ "net/http/pprof"
    "runtime"
    "time"
)

func monitorIOBoundApp() {
    // –ó–∞–ø—É—Å–∫–∞–µ–º pprof —Å–µ—Ä–≤–µ—Ä
    go func() {
        http.ListenAndServe(":6060", nil)
    }()
    
    // –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ –≥–æ—Ä—É—Ç–∏–Ω
    go func() {
        for {
            time.Sleep(5 * time.Second)
            fmt.Printf("Goroutines: %d\n", runtime.NumGoroutine())
        }
    }()
}
```

## –õ—É—á—à–∏–µ –ø—Ä–∞–∫—Ç–∏–∫–∏ –¥–ª—è I/O Bound –æ–ø–µ—Ä–∞—Ü–∏–π

1. **–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–µ –æ–ø–µ—Ä–∞—Ü–∏–∏** - –Ω–µ –±–ª–æ–∫–∏—Ä—É–π—Ç–µ –≥–ª–∞–≤–Ω—ã–µ –≥–æ—Ä—É—Ç–∏–Ω—ã
2. **–û–≥—Ä–∞–Ω–∏—á–∏–≤–∞–π—Ç–µ –ø–∞—Ä–∞–ª–ª–µ–ª–∏–∑–º** - –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ semaphore –∏–ª–∏ worker pools
3. **–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Ç–∞–π–º–∞—É—Ç—ã** - –≤—Å–µ–≥–¥–∞ —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–π—Ç–µ —Ä–∞–∑—É–º–Ω—ã–µ —Ç–∞–π–º–∞—É—Ç—ã
4. **–ö—ç—à–∏—Ä—É–π—Ç–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã** - —É–º–µ–Ω—å—à–∞–π—Ç–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø–æ–≤—Ç–æ—Ä–Ω—ã—Ö I/O –æ–ø–µ—Ä–∞—Ü–∏–π
5. **–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ connection pooling** - –¥–ª—è –±–∞–∑ –¥–∞–Ω–Ω—ã—Ö –∏ HTTP –∫–ª–∏–µ–Ω—Ç–æ–≤
6. **–û–±—Ä–∞–±–∞—Ç—ã–≤–∞–π—Ç–µ –æ—à–∏–±–∫–∏** - I/O –æ–ø–µ—Ä–∞—Ü–∏–∏ —á–∞—Å—Ç–æ –∑–∞–≤–µ—Ä—à–∞—é—Ç—Å—è –æ—à–∏–±–∫–∞–º–∏
7. **–ú–æ–Ω–∏—Ç–æ—Ä—å—Ç–µ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å** - –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ pprof –∏ –º–µ—Ç—Ä–∏–∫–∏

–ü—Ä–∞–≤–∏–ª—å–Ω–∞—è —Ä–∞–±–æ—Ç–∞ —Å I/O Bound –æ–ø–µ—Ä–∞—Ü–∏—è–º–∏ –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏ –≤–∞–∂–Ω–∞ –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –≤—ã—Å–æ–∫–æ–ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω—ã—Ö –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π –≤ Go. –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –≥–æ—Ä—É—Ç–∏–Ω –∏ –∫–∞–Ω–∞–ª–æ–≤ –ø–æ–∑–≤–æ–ª—è–µ—Ç —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—Ç—å –º–Ω–æ–∂–µ—Å—Ç–≤–æ –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω—ã—Ö I/O –æ–ø–µ—Ä–∞—Ü–∏–π –±–µ–∑ –∏–∑–ª–∏—à–Ω–µ–π –Ω–∞–≥—Ä—É–∑–∫–∏ –Ω–∞ —Å–∏—Å—Ç–µ–º—É.
# 9 - cpu bound operations

## –ß—Ç–æ —Ç–∞–∫–æ–µ CPU Bound Operations?

CPU Bound Operations (–æ–ø–µ—Ä–∞—Ü–∏–∏, –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–Ω—ã–µ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å—é –ø—Ä–æ—Ü–µ—Å—Å–æ—Ä–∞) ‚Äî —ç—Ç–æ –∑–∞–¥–∞—á–∏, –∫–æ—Ç–æ—Ä—ã–µ —Ç—Ä–µ–±—É—é—Ç –∏–Ω—Ç–µ–Ω—Å–∏–≤–Ω—ã—Ö –≤—ã—á–∏—Å–ª–µ–Ω–∏–π –∏ –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ –∏—Å–ø–æ–ª—å–∑—É—é—Ç –≤—ã—á–∏—Å–ª–∏—Ç–µ–ª—å–Ω—ã–µ —Ä–µ—Å—É—Ä—Å—ã CPU. –í –æ—Ç–ª–∏—á–∏–µ –æ—Ç I/O Bound –æ–ø–µ—Ä–∞—Ü–∏–π, –æ–Ω–∏ –ø—Ä–æ–≤–æ–¥—è—Ç –±–æ–ª—å—à—É—é —á–∞—Å—Ç—å –≤—Ä–µ–º–µ–Ω–∏ –≤ –≤—ã—á–∏—Å–ª–µ–Ω–∏—è—Ö, –∞ –Ω–µ –≤ –æ–∂–∏–¥–∞–Ω–∏–∏ –æ–ø–µ—Ä–∞—Ü–∏–π –≤–≤–æ–¥–∞-–≤—ã–≤–æ–¥–∞.

## –ö–ª—é—á–µ–≤—ã–µ —Ö–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∏ CPU Bound –æ–ø–µ—Ä–∞—Ü–∏–π:

- –í—ã—Å–æ–∫–∞—è –∑–∞–≥—Ä—É–∑–∫–∞ –ø—Ä–æ—Ü–µ—Å—Å–æ—Ä–∞
- –ú–∏–Ω–∏–º–∞–ª—å–Ω–æ–µ –≤—Ä–µ–º—è –æ–∂–∏–¥–∞–Ω–∏—è I/O
- –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å –∑–∞–≤–∏—Å–∏—Ç –æ—Ç —Ç–∞–∫—Ç–æ–≤–æ–π —á–∞—Å—Ç–æ—Ç—ã –∏ –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ —è–¥–µ—Ä
- –ü—Ä–∏–º–µ—Ä—ã: –º–∞—Ç–µ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ –≤—ã—á–∏—Å–ª–µ–Ω–∏—è, –æ–±—Ä–∞–±–æ—Ç–∫–∞ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π, –º–∞—à–∏–Ω–Ω–æ–µ –æ–±—É—á–µ–Ω–∏–µ, —à–∏—Ñ—Ä–æ–≤–∞–Ω–∏–µ

## –û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏ —Ä–∞–±–æ—Ç—ã —Å CPU Bound –æ–ø–µ—Ä–∞—Ü–∏—è–º–∏ –≤ Go

### –ü—Ä–æ–±–ª–µ–º–∞ –ø–ª–∞–Ω–∏—Ä–æ–≤—â–∏–∫–∞ Go

–ü–ª–∞–Ω–∏—Ä–æ–≤—â–∏–∫ Go –æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω –¥–ª—è I/O Bound –æ–ø–µ—Ä–∞—Ü–∏–π. –ü—Ä–∏ —Ä–∞–±–æ—Ç–µ —Å CPU Bound –∑–∞–¥–∞—á–∞–º–∏ –≤–æ–∑–Ω–∏–∫–∞—é—Ç —Å–ø–µ—Ü–∏—Ñ–∏—á–µ—Å–∫–∏–µ –ø—Ä–æ–±–ª–µ–º—ã:

1. **–ß—Ä–µ–∑–º–µ—Ä–Ω–æ–µ –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞** - —Å–ª–∏—à–∫–æ–º –º–Ω–æ–≥–æ –≥–æ—Ä—É—Ç–∏–Ω –∫–æ–Ω–∫—É—Ä–∏—Ä—É—é—Ç –∑–∞ –ø—Ä–æ—Ü–µ—Å—Å–æ—Ä–Ω–æ–µ –≤—Ä–µ–º—è
2. **–õ–æ–∂–Ω–æ–µ —Ä–∞–∑–¥–µ–ª–µ–Ω–∏–µ –∫—ç—à–∞ (False Sharing)** - –Ω–µ—Å–∫–æ–ª—å–∫–æ —è–¥–µ—Ä –ø—Ä–æ—Ü–µ—Å—Å–æ—Ä–∞ —Ä–∞–±–æ—Ç–∞—é—Ç —Å –æ–¥–Ω–æ–π –æ–±–ª–∞—Å—Ç—å—é –ø–∞–º—è—Ç–∏
3. **–ù–∞–∫–ª–∞–¥–Ω—ã–µ —Ä–∞—Å—Ö–æ–¥—ã** - —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –±–æ–ª—å—à–∏–º –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ–º –≥–æ—Ä—É—Ç–∏–Ω –º–æ–∂–µ—Ç —Å—ä–µ–¥–∞—Ç—å –ø—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞ –ø–∞—Ä–∞–ª–ª–µ–ª–∏–∑–º–∞

### –û–ø—Ç–∏–º–∞–ª—å–Ω–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –≥–æ—Ä—É—Ç–∏–Ω

–î–ª—è CPU Bound –∑–∞–¥–∞—á –æ–ø—Ç–∏–º–∞–ª—å–Ω–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –≥–æ—Ä—É—Ç–∏–Ω —Ä–∞–≤–Ω–æ –∫–æ–ª–∏—á–µ—Å—Ç–≤—É –¥–æ—Å—Ç—É–ø–Ω—ã—Ö CPU —è–¥–µ—Ä:

```go
numGoroutines := runtime.NumCPU()
```

## –°—Ç—Ä–∞—Ç–µ–≥–∏–∏ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏

### 1. Worker Pool —Å –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ–º

–°–æ–∑–¥–∞–≤–∞–π—Ç–µ –ø—É–ª –≤–æ—Ä–∫–µ—Ä–æ–≤, –≥–¥–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –≥–æ—Ä—É—Ç–∏–Ω —Ä–∞–≤–Ω–æ –∫–æ–ª–∏—á–µ—Å—Ç–≤—É —è–¥–µ—Ä –ø—Ä–æ—Ü–µ—Å—Å–æ—Ä–∞:

```go
func worker(id int, jobs <-chan Task, results chan<- Result) {
    for task := range jobs {
        // –í—ã–ø–æ–ª–Ω–µ–Ω–∏–µ CPU –∏–Ω—Ç–µ–Ω—Å–∏–≤–Ω–æ–π –∑–∞–¥–∞—á–∏
        result := processTask(task)
        results <- result
    }
}

// –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –ø—É–ª–∞
numWorkers := runtime.NumCPU()
for i := 0; i < numWorkers; i++ {
    go worker(i, jobs, results)
}
```

### 2. –ü—Ä–∏–≤—è–∑–∫–∞ –∫ –ø–æ—Ç–æ–∫–∞–º –û–°

–î–ª—è –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏ –≤–∞–∂–Ω—ã—Ö CPU Bound –∑–∞–¥–∞—á –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ –ø—Ä–∏–≤—è–∑–∫—É –∫ –ø–æ—Ç–æ–∫–∞–º –û–°:

```go
func criticalCPUWork() {
    runtime.LockOSThread()
    defer runtime.UnlockOSThread()
    
    // –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∞—è CPU Bound –∑–∞–¥–∞—á–∞
    performIntensiveComputation()
}
```

### 3. –ë–ª–æ—á–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ –¥–∞–Ω–Ω—ã—Ö

–û–±—Ä–∞–±–∞—Ç—ã–≤–∞–π—Ç–µ –¥–∞–Ω–Ω—ã–µ –±–ª–æ–∫–∞–º–∏ –¥–ª—è –ª—É—á—à–µ–π –∫—ç—à-–ª–æ–∫–∞–ª–∏–∑–∞—Ü–∏–∏:

```go
func processDataBlock(data []float64, start, end int) {
    // –û–±—Ä–∞–±–æ—Ç–∫–∞ –±–ª–æ–∫–∞ –¥–∞–Ω–Ω—ã—Ö
    for i := start; i < end; i++ {
        data[i] = expensiveComputation(data[i])
    }
}
```

## –¢–µ—Ö–Ω–∏–∫–∏ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏

### 1. –£–º–µ–Ω—å—à–µ–Ω–∏–µ –∞–ª–ª–æ–∫–∞—Ü–∏–π –ø–∞–º—è—Ç–∏

–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –ø—É–ª—ã –æ–±—ä–µ–∫—Ç–æ–≤ –∏ –ø–æ–≤—Ç–æ—Ä–Ω–æ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –ø–∞–º—è—Ç–∏:

```go
var matrixPool = sync.Pool{
    New: func() interface{} {
        return make([][]float64, 1000)
    },
}

func getMatrix() [][]float64 {
    return matrixPool.Get().([][]float64)
}

func putMatrix(m [][]float64) {
    matrixPool.Put(m)
}
```

### 2. –ö—ç—à-–¥—Ä—É–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã–µ –∞–ª–≥–æ—Ä–∏—Ç–º—ã

–û—Ä–≥–∞–Ω–∏–∑—É–π—Ç–µ –¥–∞–Ω–Ω—ã–µ –¥–ª—è –æ–ø—Ç–∏–º–∞–ª—å–Ω–æ–≥–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –∫—ç—à–∞ –ø—Ä–æ—Ü–µ—Å—Å–æ—Ä–∞:

```go
// –ü–ª–æ—Ö–æ: —Å–ª—É—á–∞–π–Ω—ã–π –¥–æ—Å—Ç—É–ø –∫ –ø–∞–º—è—Ç–∏
for i := 0; i < size; i++ {
    for j := 0; j < size; j++ {
        result[j][i] = matrix[i][j] // –ü–ª–æ—Ö–∞—è –ª–æ–∫–∞–ª–∏–∑–∞—Ü–∏—è
    }
}

// –•–æ—Ä–æ—à–æ: –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω—ã–π –¥–æ—Å—Ç—É–ø –∫ –ø–∞–º—è—Ç–∏
for i := 0; i < size; i++ {
    for j := 0; j < size; j++ {
        result[i][j] = matrix[i][j] // –•–æ—Ä–æ—à–∞—è –ª–æ–∫–∞–ª–∏–∑–∞—Ü–∏—è
    }
}
```

### 3. –í–µ–∫—Ç–æ—Ä–∏–∑–∞—Ü–∏—è –≤—ã—á–∏—Å–ª–µ–Ω–∏–π

–û–±—Ä–∞–±–∞—Ç—ã–≤–∞–π—Ç–µ –Ω–µ—Å–∫–æ–ª—å–∫–æ —ç–ª–µ–º–µ–Ω—Ç–æ–≤ –¥–∞–Ω–Ω—ã—Ö –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ:

```go
func processBatch(data []float64) {
    // –û–±—Ä–∞–±–æ—Ç–∫–∞ –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö —ç–ª–µ–º–µ–Ω—Ç–æ–≤ –≤ –æ–¥–Ω–æ–π –∏—Ç–µ—Ä–∞—Ü–∏–∏
    for i := 0; i < len(data); i += 4 {
        processFourElements(data[i:])
    }
}
```

### 4. –ü—Ä–µ–¥–≤—ã—á–∏—Å–ª–µ–Ω–∏–µ –∏ –º–µ–º–æ–∏–∑–∞—Ü–∏—è

–ö—ç—à–∏—Ä—É–π—Ç–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã –¥–æ—Ä–æ–≥–æ—Å—Ç–æ—è—â–∏—Ö –≤—ã—á–∏—Å–ª–µ–Ω–∏–π:

```go
var computationCache sync.Map

func expensiveComputation(input int) int {
    if val, ok := computationCache.Load(input); ok {
        return val.(int)
    }
    
    // –î–æ—Ä–æ–≥–æ–µ –≤—ã—á–∏—Å–ª–µ–Ω–∏–µ
    result := compute(input)
    computationCache.Store(input, result)
    return result
}
```

## –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∏ –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞

### –ü—Ä–æ—Ñ–∏–ª–∏—Ä–æ–≤–∞–Ω–∏–µ CPU

–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –≤—Å—Ç—Ä–æ–µ–Ω–Ω—ã–µ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã –ø—Ä–æ—Ñ–∏–ª–∏—Ä–æ–≤–∞–Ω–∏—è:

```go
func startCPUProfile() {
    f, _ := os.Create("cpu.prof")
    pprof.StartCPUProfile(f)
    defer pprof.StopCPUProfile()
    
    performCPUIntensiveWork()
}
```

### –ê–Ω–∞–ª–∏–∑ –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ –≥–æ—Ä—É—Ç–∏–Ω

–°–ª–µ–¥–∏—Ç–µ –∑–∞ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ–º –≥–æ—Ä—É—Ç–∏–Ω –≤ —Å–∏—Å—Ç–µ–º–µ:

```go
func monitorGoroutines() {
    for {
        count := runtime.NumGoroutine()
        if count > 1000 {
            log.Printf("Warning: high goroutine count: %d", count)
        }
        time.Sleep(10 * time.Second)
    }
}
```

## –ü—Ä–∞–∫—Ç–∏—á–µ—Å–∫–∏–µ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏

### 1. –ò–∑–±–µ–≥–∞–π—Ç–µ –∏–∑–±—ã—Ç–æ—á–Ω–æ–≥–æ –ø–∞—Ä–∞–ª–ª–µ–ª–∏–∑–º–∞

–ù–µ —Å–æ–∑–¥–∞–≤–∞–π—Ç–µ –±–æ–ª—å—à–µ –≥–æ—Ä—É—Ç–∏–Ω, —á–µ–º –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ CPU —è–¥–µ—Ä –¥–ª—è CPU Bound –∑–∞–¥–∞—á:

```go
// –ü–ª–æ—Ö–æ
for i := 0; i < 1000; i++ {
    go cpuIntensiveTask() // –°–ª–∏—à–∫–æ–º –º–Ω–æ–≥–æ –¥–ª—è CPU Bound
}

// –•–æ—Ä–æ—à–æ
numCPU := runtime.NumCPU()
for i := 0; i < numCPU; i++ {
    go cpuIntensiveTask()
}
```

### 2. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ appropriate granularity

–í—ã–±–∏—Ä–∞–π—Ç–µ –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π —Ä–∞–∑–º–µ—Ä –∑–∞–¥–∞—á –¥–ª—è –±–∞–ª–∞–Ω—Å–∞ –º–µ–∂–¥—É –Ω–∞–∫–ª–∞–¥–Ω—ã–º–∏ —Ä–∞—Å—Ö–æ–¥–∞–º–∏ –∏ –ø–∞—Ä–∞–ª–ª–µ–ª–∏–∑–º–æ–º:

```go
// –°–ª–∏—à–∫–æ–º –º–µ–ª–∫–∏–µ –∑–∞–¥–∞—á–∏ - –±–æ–ª—å—à–∏–µ –Ω–∞–∫–ª–∞–¥–Ω—ã–µ —Ä–∞—Å—Ö–æ–¥—ã
func processTinyChunks() {
    for i := 0; i < 1000000; i++ {
        go processSingleItem(data[i]) // –°–ª–∏—à–∫–æ–º –º–µ–ª–∫–æ
    }
}

// –°–ª–∏—à–∫–æ–º –∫—Ä—É–ø–Ω—ã–µ –∑–∞–¥–∞—á–∏ - –Ω–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω—ã–π –ø–∞—Ä–∞–ª–ª–µ–ª–∏–∑–º
func processHugeChunk() {
    go processAllData(data) // –°–ª–∏—à–∫–æ–º –∫—Ä—É–ø–Ω–æ
}

// –ü—Ä–∞–≤–∏–ª—å–Ω—ã–π –±–∞–ª–∞–Ω—Å
func processOptimalChunks() {
    chunkSize := len(data) / runtime.NumCPU()
    for i := 0; i < len(data); i += chunkSize {
        go processChunk(data[i:i+chunkSize])
    }
}
```

### 3. –ú–∏–Ω–∏–º–∏–∑–∏—Ä—É–π—Ç–µ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—é

–£–º–µ–Ω—å—à–∞–π—Ç–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –º—å—é—Ç–µ–∫—Å–æ–≤ –≤ –≥–æ—Ä—è—á–∏—Ö –ø—É—Ç—è—Ö:

```go
// –ü–ª–æ—Ö–æ: —á–∞—Å—Ç—ã–µ –±–ª–æ–∫–∏—Ä–æ–≤–∫–∏
var mu sync.Mutex
func processWithLock() {
    mu.Lock()
    defer mu.Unlock()
    // –†–∞–±–æ—Ç–∞ —Å shared data
}

// –•–æ—Ä–æ—à–æ: —É–º–µ–Ω—å—à–µ–Ω–∏–µ contention
func processWithChannel() {
    results := make(chan Result)
    go func() {
        results <- computeResult()
    }()
    return <-results
}
```

## –†–∞—Å–ø—Ä–æ—Å—Ç—Ä–∞–Ω–µ–Ω–Ω—ã–µ –æ—à–∏–±–∫–∏

### 1. –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –≥–æ—Ä—É—Ç–∏–Ω

```go
// –û—à–∏–±–∫–∞: —Å–æ–∑–¥–∞–Ω–∏–µ –≥–æ—Ä—É—Ç–∏–Ω –≤ —Ü–∏–∫–ª–µ –±–µ–∑ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è
for item := range items {
    go process(item) // –ú–æ–∂–µ—Ç —Å–æ–∑–¥–∞—Ç—å —Ç—ã—Å—è—á–∏ –≥–æ—Ä—É—Ç–∏–Ω
}

// –ü—Ä–∞–≤–∏–ª—å–Ω–æ: –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ semaphore –¥–ª—è –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è
sem := make(chan struct{}, runtime.NumCPU())
for item := range items {
    sem <- struct{}{}
    go func(i Item) {
        defer func() { <-sem }()
        process(i)
    }(item)
}
```

### 2. –ò–≥–Ω–æ—Ä–∏—Ä–æ–≤–∞–Ω–∏–µ –ª–æ–∫–∞–ª—å–Ω–æ—Å—Ç–∏ –¥–∞–Ω–Ω—ã—Ö

```go
// –û—à–∏–±–∫–∞: –ø–ª–æ—Ö–∞—è –∫—ç—à-–ª–æ–∫–∞–ª–∏–∑–∞—Ü–∏—è
type Data struct {
    values [][]float64
}

func (d *Data) Process() {
    for col := 0; col < cols; col++ {
        for row := 0; row < rows; row++ {
            d.values[row][col] = compute() // –°–ª—É—á–∞–π–Ω—ã–π –¥–æ—Å—Ç—É–ø
        }
    }
}

// –ü—Ä–∞–≤–∏–ª—å–Ω–æ: –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω—ã–π –¥–æ—Å—Ç—É–ø –∫ –ø–∞–º—è—Ç–∏
func (d *Data) ProcessOptimized() {
    for row := 0; row < rows; row++ {
        for col := 0; col < cols; col++ {
            d.values[row][col] = compute() // –ü–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω—ã–π –¥–æ—Å—Ç—É–ø
        }
    }
}
```

## –ó–∞–∫–ª—é—á–µ–Ω–∏–µ

–û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è CPU Bound –æ–ø–µ—Ä–∞—Ü–∏–π –≤ Go —Ç—Ä–µ–±—É–µ—Ç –ø–æ–Ω–∏–º–∞–Ω–∏—è –∫–∞–∫ —Ä–∞–±–æ—Ç—ã –ø–ª–∞–Ω–∏—Ä–æ–≤—â–∏–∫–∞ Go, —Ç–∞–∫ –∏ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã —Å–æ–≤—Ä–µ–º–µ–Ω–Ω—ã—Ö –ø—Ä–æ—Ü–µ—Å—Å–æ—Ä–æ–≤. –ö–ª—é—á–µ–≤—ã–µ –ø—Ä–∏–Ω—Ü–∏–ø—ã:

- –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –≥–æ—Ä—É—Ç–∏–Ω, —Ä–∞–≤–Ω–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤—É CPU —è–¥–µ—Ä
- –û–ø—Ç–∏–º–∏–∑–∏—Ä—É–π—Ç–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –∫—ç—à–∞ –ø—Ä–æ—Ü–µ—Å—Å–æ—Ä–∞
- –ú–∏–Ω–∏–º–∏–∑–∏—Ä—É–π—Ç–µ –Ω–∞–∫–ª–∞–¥–Ω—ã–µ —Ä–∞—Å—Ö–æ–¥—ã –Ω–∞ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—é
- –ü—Ä–æ—Ñ–∏–ª–∏—Ä—É–π—Ç–µ –∏ –∏–∑–º–µ—Ä—è–π—Ç–µ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å
- –ë–∞–ª–∞–Ω—Å–∏—Ä—É–π—Ç–µ –º–µ–∂–¥—É –ø–∞—Ä–∞–ª–ª–µ–ª–∏–∑–º–æ–º –∏ –Ω–∞–∫–ª–∞–¥–Ω—ã–º–∏ —Ä–∞—Å—Ö–æ–¥–∞–º–∏

–ü—Ä–∞–≤–∏–ª—å–Ω–æ –æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ CPU Bound –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –≤ Go –º–æ–≥—É—Ç —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –º–Ω–æ–≥–æ—è–¥–µ—Ä–Ω—ã–µ –ø—Ä–æ—Ü–µ—Å—Å–æ—Ä—ã –∏ –¥–æ—Å—Ç–∏–≥–∞—Ç—å –≤—ã—Å–æ–∫–æ–π –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ –≤—ã—á–∏—Å–ª–µ–Ω–∏–π.
# 10 - —Å—Ç–µ–∫ –≥–æ—Ä—É—Ç–∏–Ω—ã
# 11 - –ø–æ—Ç–æ–∫–∏
# 12 - –º—å—é—Ç–µ–∫—Å—ã
# 13 - –ü—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω–æ–µ –∑–∞–≤–µ—Ä—à–µ–Ω–∏–µ –≥–æ—Ä—É—Ç–∏–Ω
# 14 - –∫–æ–Ω—Ç–µ–∫—Å—Ç
# 15 - select
# 16 - –≤–∏–¥—ã –∫–æ–Ω—Ç–µ–∫—Å—Ç
# 17 - –ü—Ä–∏–º–∏—Ç–∏–≤—ã Lock\RWlock
# 18 - –∫–∞–Ω–∞–ª—ã
# 19 - –∞—Ç–æ–º–∏–∫–∏
# 20 - REST
# 21 - grpc
# 22 - –ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è
# 23 - basic auth
# 24 - jwt
# 25 - –ö–∞–∫ –æ—Ç–ø—Ä–∞–≤–∏—Ç—å –±–∏–Ω–∞—Ä–∫–∏–∫ —á–µ—Ä–µ–∑ get-–∑–∞–ø—Ä–æ—Å
# 26 - –ò–Ω–¥–µ–∫—Å—ã –≤ Postgres
# 27 - –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è —Ä–∞–±–æ—Ç—ã —Ç–∞–±–ª–∏—Ü—ã
# 28 -
# 29 -
# 30 -